var ve=Object.defineProperty;var ge=(o,a,e)=>a in o?ve(o,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[a]=e;var p=(o,a,e)=>(ge(o,typeof a!="symbol"?a+"":a,e),e);import{r as S,A as x,_ as m,a1 as ue,a2 as he,j as t,c as r,bp as me,aa as d,a8 as y,c5 as Ce}from"./index-c20b5e8e.js";import{S as i,a as De}from"./index-297358d3.js";import{R as u,C as n}from"./row-58ed805b.js";import{D as h}from"./index-98f1088d.js";import"./PickerPanel-72c5d64a.js";/* empty css              */import{D as we}from"./index-2f7554ca.js";import{T as Me}from"./Table-fe15f1b3.js";import"./Pagination-e2a53e90.js";var Oe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM790.2 326H602V137.8L790.2 326zm1.8 562H232V136h302v216a42 42 0 0042 42h216v494zM544 472c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v108H372c-4.4 0-8 3.6-8 8v48c0 4.4 3.6 8 8 8h108v108c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V644h108c4.4 0 8-3.6 8-8v-48c0-4.4-3.6-8-8-8H544V472z"}}]},name:"file-add",theme:"outlined"};const Re=Oe;var Se=function(a,e){return S.createElement(x,m(m({},a),{},{ref:e,icon:Re}))};Se.displayName="FileAddOutlined";const ie=S.forwardRef(Se);var Ae={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M758.2 839.1C851.8 765.9 912 651.9 912 523.9 912 303 733.5 124.3 512.6 124 291.4 123.7 112 302.8 112 523.9c0 125.2 57.5 236.9 147.6 310.2 3.5 2.8 8.6 2.2 11.4-1.3l39.4-50.5c2.7-3.4 2.1-8.3-1.2-11.1-8.1-6.6-15.9-13.7-23.4-21.2a318.64 318.64 0 01-68.6-101.7C200.4 609 192 567.1 192 523.9s8.4-85.1 25.1-124.5c16.1-38.1 39.2-72.3 68.6-101.7 29.4-29.4 63.6-52.5 101.7-68.6C426.9 212.4 468.8 204 512 204s85.1 8.4 124.5 25.1c38.1 16.1 72.3 39.2 101.7 68.6 29.4 29.4 52.5 63.6 68.6 101.7 16.7 39.4 25.1 81.3 25.1 124.5s-8.4 85.1-25.1 124.5a318.64 318.64 0 01-68.6 101.7c-9.3 9.3-19.1 18-29.3 26L668.2 724a8 8 0 00-14.1 3l-39.6 162.2c-1.2 5 2.6 9.9 7.7 9.9l167 .8c6.7 0 10.5-7.7 6.3-12.9l-37.3-47.9z"}}]},name:"redo",theme:"outlined"};const Pe=Ae;var pe=function(a,e){return S.createElement(x,m(m({},a),{},{ref:e,icon:Pe}))};pe.displayName="RedoOutlined";const de=S.forwardRef(pe);var Be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M678.3 642.4c24.2-13 51.9-20.4 81.4-20.4h.1c3 0 4.4-3.6 2.2-5.6a371.67 371.67 0 00-103.7-65.8c-.4-.2-.8-.3-1.2-.5C719.2 505 759.6 431.7 759.6 349c0-137-110.8-248-247.5-248S264.7 212 264.7 349c0 82.7 40.4 156 102.6 201.1-.4.2-.8.3-1.2.5-44.7 18.9-84.8 46-119.3 80.6a373.42 373.42 0 00-80.4 119.5A373.6 373.6 0 00137 888.8a8 8 0 008 8.2h59.9c4.3 0 7.9-3.5 8-7.8 2-77.2 32.9-149.5 87.6-204.3C357 628.2 432.2 597 512.2 597c56.7 0 111.1 15.7 158 45.1a8.1 8.1 0 008.1.3zM512.2 521c-45.8 0-88.9-17.9-121.4-50.4A171.2 171.2 0 01340.5 349c0-45.9 17.9-89.1 50.3-121.6S466.3 177 512.2 177s88.9 17.9 121.4 50.4A171.2 171.2 0 01683.9 349c0 45.9-17.9 89.1-50.3 121.6C601.1 503.1 558 521 512.2 521zM880 759h-84v-84c0-4.4-3.6-8-8-8h-56c-4.4 0-8 3.6-8 8v84h-84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h84v84c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8v-84h84c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8z"}}]},name:"user-add",theme:"outlined"};const Ye=Be;var ye=function(a,e){return S.createElement(x,m(m({},a),{},{ref:e,icon:Ye}))};ye.displayName="UserAddOutlined";const f=S.forwardRef(ye);var oe;let ze=ue(oe=class extends he.Component{render(){const{data:a,intl:{formatMessage:e}}=this.props,s=[{title:e({id:"StatsBySales.Manager"}),dataIndex:"name",key:"name",render:l=>t("b",{children:l})},{title:e({id:"StatsBySales.Trial"}),dataIndex:["data","status","trial","days"],key:"trial",render:l=>t("span",{children:l})},{title:e({id:"StatsBySales.New"}),dataIndex:["data","status","new","days"],key:"new",render:l=>t("span",{children:l})},{title:e({id:"StatsBySales.Prolong"}),dataIndex:["data","status","prolong","days"],key:"prolong",render:l=>t("span",{children:l})},{title:e({id:"StatsBySales.Renew"}),dataIndex:["data","status","renew","days"],key:"renew",render:l=>t("span",{children:l})},{title:e({id:"StatsBySales.2Meals"}),dataIndex:["data","mealsPerDay","two","days"],key:"two",render:l=>t("span",{children:l})},{title:e({id:"StatsBySales.3Meals"}),dataIndex:["data","mealsPerDay","three","days"],key:"three",render:l=>t("span",{children:l})},{title:e({id:"StatsBySales.5Meals"}),dataIndex:["data","mealsPerDay","five","days"],key:"five",render:l=>t("span",{children:l})},{title:e({id:"StatsBySales.Custom"}),dataIndex:["data","mealsPerDay","custom","days"],key:"custom",render:l=>t("span",{children:l})},{title:e({id:"StatsBySales.Total"}),dataIndex:["data","all"],key:"all",render:l=>t("span",{children:l})},{title:e({id:"StatsBySales.RenewalRate"}),dataIndex:["data","renewalRate"],key:"renewalRate",render:l=>t("span",{children:l})}];return r(me,{children:[t(h,{children:e({id:"StatsBySales.StatisticsBySales"})}),t(Me,{tableLayout:"auto",scroll:{x:"100%"},columns:s,dataSource:a,onChange:this.handleTableChange,pagination:!1,rowKey:()=>Math.random()})]})}})||oe;var ce;const{RangePicker:be}=we;let He=ue(ce=class extends he.Component{constructor(){super(...arguments);p(this,"state",{start:d().startOf("month").unix(),end:d().endOf("month").unix()});p(this,"handleChangePeriod",e=>{this.setState({start:e[0].unix(),end:e[1].unix()}),this.props.getSalesMainData(d(e[0].unix()*1e3).format("DD-MM-YYYY"),d(e[1].unix()*1e3).format("DD-MM-YYYY")),this.props.getSalesActiveOrders(d(e[0].unix()*1e3).format("DD-MM-YYYY"),d(e[1].unix()*1e3).format("DD-MM-YYYY"))})}UNSAFE_componentWillMount(){const{start:e,end:s}=this.state;this.props.getSalesMainData(e,s),this.props.getSalesActiveOrders(e,s)}render(){var v,g,C,D,w,M,O,R,A,P,B,Y,z,b,F,k,$,I,N,T,U,_,V,j,E,H,L,K,W,q,G,J,Q,X,Z,ee,te,le,se,re,ae,ne;const{data:e,activeOrders:s,intl:{formatMessage:l}}=this.props,{start:fe,end:xe}=this.state;return r("div",{className:"card",children:[t("div",{className:"card-header",children:t("div",{className:"utils__title",style:{marginBottom:"-20px"},children:t("strong",{className:"text-uppercase font-size-14",children:t(be,{ranges:{"Previous Month":[d().subtract(1,"month").startOf("month"),d().subtract(1,"month").endOf("month")],"This Month":[d().startOf("month"),d().endOf("month")]},defaultValue:[d(fe*1e3),d(xe*1e3)],format:"DD.MM.YYYY",onChange:this.handleChangePeriod,style:{marginRight:"10px",width:"75%"}})})})}),e&&r("div",{className:"card-body",children:[r(y,{roles:["root","admin","sales","salesDirector","finance"],children:[t(u,{gutter:16,style:{fontSize:"32px",marginBottom:"10px"},children:t(n,{span:24,children:r("span",{children:[(v=e==null?void 0:e.result)==null?void 0:v.all," ",l({id:"SalesStatCard.orders"})]})})}),t(h,{children:l({id:"SalesStatCard.Orders"})}),r(u,{gutter:16,children:[r(n,{sm:12,md:5,children:[t(i,{title:l({id:"SalesStatCard.Trial"}),value:(g=e==null?void 0:e.result)==null?void 0:g.status.trial.total,prefix:t(f,{})}),t("span",{style:{fontSize:"18px"},children:((C=e==null?void 0:e.result)==null?void 0:C.all)!==0?`${(((D=e==null?void 0:e.result)==null?void 0:D.status.trial.total)/((w=e==null?void 0:e.result)==null?void 0:w.all)*100).toFixed(0)}%`:""})]}),r(n,{sm:12,md:5,children:[t(i,{title:l({id:"SalesStatCard.New"}),value:(M=e==null?void 0:e.result)==null?void 0:M.status.new.total,prefix:t(f,{})}),t("span",{style:{fontSize:"18px"},children:((O=e==null?void 0:e.result)==null?void 0:O.all)!==0?`${(((R=e==null?void 0:e.result)==null?void 0:R.status.new.total)/((A=e==null?void 0:e.result)==null?void 0:A.all)*100).toFixed(0)}%`:""})]}),r(n,{sm:12,md:5,children:[t(i,{title:l({id:"SalesStatCard.Prolong"}),value:(P=e==null?void 0:e.result)==null?void 0:P.status.prolong.total,prefix:t(ie,{})}),t("span",{style:{fontSize:"18px"},children:((B=e==null?void 0:e.result)==null?void 0:B.all)!==0?`${(((Y=e==null?void 0:e.result)==null?void 0:Y.status.prolong.total)/((z=e==null?void 0:e.result)==null?void 0:z.all)*100).toFixed(0)}%`:""})]}),r(n,{sm:12,md:4,children:[t(i,{title:l({id:"SalesStatCard.Renewal"}),value:(b=e==null?void 0:e.result)==null?void 0:b.status.renew.total,prefix:t(de,{})}),t("span",{style:{fontSize:"18px"},children:((F=e==null?void 0:e.result)==null?void 0:F.all)!==0?`${(((k=e==null?void 0:e.result)==null?void 0:k.status.renew.total)/(($=e==null?void 0:e.result)==null?void 0:$.all)*100).toFixed(0)}%`:""})]}),t(n,{sm:12,md:5,children:t(i,{title:l({id:"SalesStatCard.RenewalRate"}),value:(I=e==null?void 0:e.result)==null?void 0:I.renewalRate,suffix:"%"})})]}),t(h,{children:l({id:"SalesStatCard.Days"})}),r(u,{gutter:16,children:[t(n,{sm:8,md:6,children:t(i,{title:l({id:"SalesStatCard.Trial(days)"}),value:(N=e==null?void 0:e.result)==null?void 0:N.status.trial.days,prefix:t(Ce,{})})}),t(n,{sm:8,md:6,children:t(i,{title:l({id:"SalesStatCard.New(days)"}),value:(T=e==null?void 0:e.result)==null?void 0:T.status.new.days,prefix:t(f,{})})}),t(n,{sm:8,md:6,children:t(i,{title:l({id:"SalesStatCard.Prolong(days)"}),value:(U=e==null?void 0:e.result)==null?void 0:U.status.prolong.days,prefix:t(ie,{})})}),t(n,{sm:8,md:6,children:t(i,{title:l({id:"SalesStatCard.Renewal(days)"}),value:(_=e==null?void 0:e.result)==null?void 0:_.status.renew.days,prefix:t(de,{})})})]}),t(h,{children:l({id:"SalesStatCard.Meals"})}),r(u,{gutter:16,children:[r(n,{sm:8,md:4,children:[t(i,{title:l({id:"SalesStatCard.2PerDay"}),value:(V=e==null?void 0:e.result)==null?void 0:V.mealsPerDay.two.total}),t("span",{style:{fontSize:"18px"},children:((j=e==null?void 0:e.result)==null?void 0:j.all)!==0?`${(((E=e==null?void 0:e.result)==null?void 0:E.mealsPerDay.two.total)/((H=e==null?void 0:e.result)==null?void 0:H.all)*100).toFixed(0)}%`:""})]}),r(n,{sm:8,md:4,children:[t(i,{title:l({id:"SalesStatCard.3PerDay"}),value:(L=e==null?void 0:e.result)==null?void 0:L.mealsPerDay.three.total}),t("span",{style:{fontSize:"18px"},children:((K=e==null?void 0:e.result)==null?void 0:K.all)!==0?`${(((W=e==null?void 0:e.result)==null?void 0:W.mealsPerDay.three.total)/((q=e==null?void 0:e.result)==null?void 0:q.all)*100).toFixed(0)}%`:""})]}),r(n,{sm:8,md:4,children:[t(i,{title:l({id:"SalesStatCard.5PerDay"}),value:(G=e==null?void 0:e.result)==null?void 0:G.mealsPerDay.five.total}),t("span",{style:{fontSize:"18px"},children:((J=e==null?void 0:e.result)==null?void 0:J.all)!==0?`${(((Q=e==null?void 0:e.result)==null?void 0:Q.mealsPerDay.five.total)/((X=e==null?void 0:e.result)==null?void 0:X.all)*100).toFixed(0)}%`:""})]}),r(n,{sm:8,md:4,children:[t(i,{title:l({id:"SalesStatCard.Other"}),value:(Z=e==null?void 0:e.result)==null?void 0:Z.mealsPerDay.custom.total}),t("span",{style:{fontSize:"18px"},children:((ee=e==null?void 0:e.result)==null?void 0:ee.all)!==0?`${(((te=e==null?void 0:e.result)==null?void 0:te.mealsPerDay.custom.total)/((le=e==null?void 0:e.result)==null?void 0:le.all)*100).toFixed(0)}%`:""})]})]}),t(y,{roles:["root","admin","salesDirector","finance"],children:t(ze,{data:e==null?void 0:e.sales})})]}),t(y,{roles:["root","admin","salesDirector","finance"],children:r(me,{children:[t(h,{children:t("h3",{children:l({id:"SalesStatCard.ActiveCustomersBySales"})})}),t(u,{gutter:16,children:((se=s==null?void 0:s.result)==null?void 0:se.globalOrders.total)&&((re=s==null?void 0:s.result)==null?void 0:re.globalOrders.sales.map(c=>t(n,{sm:12,md:6,children:t(i,{title:c.name,value:c.users})},c.name)))}),t(h,{children:t("h3",{children:l({id:"SalesStatCard.ActiveOrdersBySales"})})}),t(u,{gutter:16,children:((ae=s==null?void 0:s.result)==null?void 0:ae.globalOrders.total)&&((ne=s==null?void 0:s.result)==null?void 0:ne.globalOrders.sales.map(c=>t(n,{sm:12,md:6,children:t(i,{title:c.name,value:c.orders})},c.name)))})]})})]}),!e&&t("div",{className:"card-body",children:t(De,{})})]})}})||ce;export{He as S};
