var Lt=Object.defineProperty;var Tt=(n,t,r)=>t in n?Lt(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r;var W=(n,t,r)=>(Tt(n,typeof t!="symbol"?t+"":t,r),r);import{r as s,A as We,_ as le,bd as vt,a1 as rt,a2 as at,a3 as ee,j as d,a4 as gt,c as j,I as _e,a5 as et,a6 as $t,B as te,aq as Nt,at as wt,au as yt,av as bt,e as be,aw as Ct,aL as Ot,i as K,l as R,aR as Mt,cP as At,cQ as He,q as It,h as I,d as Me,cR as zt,C as nt,T as jt,f as Ft,g as qt,aV as Bt,k as _t,U as lt,P as ct,L as dt,D as Ht,ap as Wt,ax as Kt,x as Gt,cS as Xt,a7 as Ae,aW as Jt,aa as Zt,aX as Qt,a8 as Yt,bg as er,aZ as Xe}from"./index-c20b5e8e.js";import{T as tr}from"./Table-fe15f1b3.js";import"./Pagination-e2a53e90.js";import{F as Q}from"./index-a86cfb93.js";import{R as Ee,C as ye}from"./row-58ed805b.js";import{I as rr}from"./index-86d1917a.js";import{P as ar}from"./progress-7ba6c5df.js";import{D as nr}from"./DownloadOutlined-96dce022.js";import{u as or}from"./dates-bfaafc52.js";import"./styleChecker-a7b568e2.js";import"./constants-480696f2.js";var ir={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};const sr=ir;var St=function(t,r){return s.createElement(We,le(le({},t),{},{ref:r,icon:sr}))};St.displayName="DeleteOutlined";const lr=s.forwardRef(St);var cr={icon:function(t,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:r}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:t}}]}},name:"file",theme:"twotone"};const dr=cr;var Dt=function(t,r){return s.createElement(We,le(le({},t),{},{ref:r,icon:dr}))};Dt.displayName="FileTwoTone";const ur=s.forwardRef(Dt);var pr={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"};const hr=pr;var Pt=function(t,r){return s.createElement(We,le(le({},t),{},{ref:r,icon:hr}))};Pt.displayName="PaperClipOutlined";const mr=s.forwardRef(Pt);var fr={icon:function(t,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:t}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:r}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:r}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:r}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:t}}]}},name:"picture",theme:"twotone"};const vr=fr;var Et=function(t,r){return s.createElement(We,le(le({},t),{},{ref:r,icon:vr}))};Et.displayName="PictureTwoTone";const gr=s.forwardRef(Et);var ut,ze;const{Option:Ne}=et;let wr=(ut=vt(({settings:n})=>({settings:n})),rt(ze=ut(ze=class extends at.Component{constructor(r){super(r);W(this,"state",{name:"",phone:"",email:"",mealsPerDay:5,amount:0,days:20,isInvoice:!0,loading:!1});W(this,"formRef",s.createRef());this.onFinish=this.onFinish.bind(this),this.closeDrawer=this.closeDrawer.bind(this)}onChangeField(r,e){r!==null&&r.target?r.target.type==="checkbox"?this.setState({[e]:r.target.checked}):this.setState({[e]:r.target.value}):this.setState({[e]:r})}async onFinish(){const{intl:{formatMessage:r}}=this.props;this.setState({loading:!0});try{const{create:e,update:i}=this.props,{currentCurrency:o}=this.props.settings;await this.formRef.current.validateFields();const{name:u,phone:c,email:a,mealsPerDay:p,days:h,amount:y,isInvoice:w}=this.state,l=await e({name:u,phone:c,email:a,mealsPerDay:p,days:h,amount:y,isInvoice:w,currency:o});l.status===201?(this.closeDrawer(),ee.success({message:r({id:"Vaucher.Created"}),description:r({id:"Vaucher.Voucher successfully created!"})}),i()):ee.error({message:r({id:"window.error"}),description:l.statusText,placement:"topLeft"})}catch(e){console.log("Failed:",e)}}closeDrawer(){const{onClose:r}=this.props;this.setState({name:"",phone:"",email:"",mealsPerDay:5,days:20,isInvoice:!0,loading:!1}),this.formRef.current.resetFields(),r()}render(){const{visible:r,intl:{formatMessage:e}}=this.props,{mealsPerDay:i,days:o,isInvoice:u,loading:c}=this.state;return d(gt,{title:"Create a new voucher",onCancel:this.closeDrawer,open:r,bodyStyle:{paddingBottom:80},okButtonProps:{hidden:!0},cancelButtonProps:{hidden:!0},footer:"",children:j(Q,{ref:this.formRef,layout:"vertical",onFinish:this.onFinish,children:[d(Ee,{gutter:16,children:d(ye,{md:24,sm:24,children:d(Q.Item,{label:e({id:"window.name"}),name:"name",rules:[{required:!0}],children:d(_e,{placeholder:e({id:"Vaucher.Name of buyer"}),onChange:a=>this.onChangeField(a,"name")})})})}),d(Ee,{gutter:16,children:d(ye,{md:24,sm:24,children:d(Q.Item,{label:"Phone",name:"phone",rules:[{required:!0}],children:d(_e,{placeholder:e({id:"Vaucher.Phone of buyer"}),onChange:a=>this.onChangeField(a,"phone")})})})}),d(Ee,{gutter:16,children:d(ye,{md:24,sm:24,children:d(Q.Item,{label:e({id:"window.email"}),name:"email",rules:[{required:!0}],children:d(_e,{placeholder:e({id:"Vaucher.Email of buyer"}),onChange:a=>this.onChangeField(a,"email")})})})}),j(Ee,{gutter:16,children:[d(ye,{md:12,sm:12,children:d(Q.Item,{name:"mealsPerDay",label:e({id:"Vaucher.Meals"}),rules:[{required:!0,message:e({id:"Vaucher.Please choose the meals number"})}],children:j(et,{placeholder:e({id:"Vaucher.Please choose the meals number"}),value:i,onChange:a=>this.onChangeField(a,"mealsPerDay"),children:[d(Ne,{value:5,children:e({id:"Vaucher.5 meals"})},"5"),d(Ne,{value:3,children:e({id:"Vaucher.3 meals"})},"3"),d(Ne,{value:2,children:e({id:"Vaucher.3 meals"})},"2")]})})}),d(ye,{md:12,sm:12,children:d(Q.Item,{name:"days",label:e({id:"Vaucher.Days"}),rules:[{required:!0,message:e({id:"Vaucher.Please choose the days number"})}],children:j(et,{placeholder:e({id:"Vaucher.Please choose the days number"}),value:o,onChange:a=>this.onChangeField(a,"days"),children:[d(Ne,{value:10,children:e({id:"Vaucher.10 days"})},"10"),d(Ne,{value:20,children:e({id:"Vaucher.20 days"})},"20")]})})})]}),d(Ee,{gutter:16,children:d(ye,{md:24,sm:24,children:d(Q.Item,{label:e({id:"Vaucher.Amount"}),name:"amount",rules:[{required:!0}],children:d(rr,{style:{width:"100%"},size:"large",placeholder:e({id:"Vaucher.Amount"}),onChange:a=>this.onChangeField(a,"amount")})})})}),d(Ee,{gutter:16,children:d(ye,{md:24,sm:24,children:d(Q.Item,{name:"isInvoice",children:d($t,{checked:u,onChange:a=>this.onChangeField(a,"isInvoice"),children:e({id:"Vaucher.Create & Send invoice"})})})})}),d("div",{className:"form-actions",children:j(Q.Item,{children:[d(te,{loading:c,style:{width:150},type:"primary",htmlType:"submit",className:"mr-3",children:e({id:"window.create"})}),d(te,{onClick:this.closeDrawer,children:e({id:"window.cancel"})})]})})]})})}})||ze)||ze);function yr(n,t){var r="cannot ".concat(n.method," ").concat(n.action," ").concat(t.status,"'"),e=new Error(r);return e.status=t.status,e.method=n.method,e.url=n.action,e}function pt(n){var t=n.responseText||n.response;if(!t)return t;try{return JSON.parse(t)}catch{return t}}function br(n){var t=new XMLHttpRequest;n.onProgress&&t.upload&&(t.upload.onprogress=function(o){o.total>0&&(o.percent=o.loaded/o.total*100),n.onProgress(o)});var r=new FormData;n.data&&Object.keys(n.data).forEach(function(i){var o=n.data[i];if(Array.isArray(o)){o.forEach(function(u){r.append("".concat(i,"[]"),u)});return}r.append(i,o)}),n.file instanceof Blob?r.append(n.filename,n.file,n.file.name):r.append(n.filename,n.file),t.onerror=function(o){n.onError(o)},t.onload=function(){return t.status<200||t.status>=300?n.onError(yr(n,t),pt(t)):n.onSuccess(pt(t),t)},t.open(n.method,n.action,!0),n.withCredentials&&"withCredentials"in t&&(t.withCredentials=!0);var e=n.headers||{};return e["X-Requested-With"]!==null&&t.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(e).forEach(function(i){e[i]!==null&&t.setRequestHeader(i,e[i])}),t.send(r),{abort:function(){t.abort()}}}var Cr=+new Date,Ir=0;function Je(){return"rc-upload-".concat(Cr,"-").concat(++Ir)}const Ze=function(n,t){if(n&&t){var r=Array.isArray(t)?t:t.split(","),e=n.name||"",i=n.type||"",o=i.replace(/\/.*$/,"");return r.some(function(u){var c=u.trim();if(/^\*(\/\*)?$/.test(u))return!0;if(c.charAt(0)==="."){var a=e.toLowerCase(),p=c.toLowerCase(),h=[p];return(p===".jpg"||p===".jpeg")&&(h=[".jpg",".jpeg"]),h.some(function(y){return a.endsWith(y)})}return/\/\*$/.test(c)?o===c.replace(/\/.*$/,""):i===c?!0:/^\w+$/.test(c)?(Nt(!1,"Upload takes an invalidate 'accept' type '".concat(c,"'.Skip for check.")),!0):!1})}return!0};function Fr(n,t){var r=n.createReader(),e=[];function i(){r.readEntries(function(o){var u=Array.prototype.slice.apply(o);e=e.concat(u);var c=!u.length;c?t(e):i()})}i()}var Sr=function(t,r,e){var i=function o(u,c){u.path=c||"",u.isFile?u.file(function(a){e(a)&&(u.fullPath&&!a.webkitRelativePath&&(Object.defineProperties(a,{webkitRelativePath:{writable:!0}}),a.webkitRelativePath=u.fullPath.replace(/^\//,""),Object.defineProperties(a,{webkitRelativePath:{writable:!1}})),r([a]))}):u.isDirectory&&Fr(u,function(a){a.forEach(function(p){o(p,"".concat(c).concat(u.name,"/"))})})};t.forEach(function(o){i(o.webkitGetAsEntry())})},Dr=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],Pr=function(n){wt(r,n);var t=yt(r);function r(){var e;bt(this,r);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o)),e.state={uid:Je()},e.reqs={},e.fileInput=void 0,e._isMounted=void 0,e.onChange=function(c){var a=e.props,p=a.accept,h=a.directory,y=c.target.files,w=be(y).filter(function(S){return!h||Ze(S,p)});e.uploadFiles(w),e.reset()},e.onClick=function(c){var a=e.fileInput;if(a){var p=e.props,h=p.children,y=p.onClick;if(h&&h.type==="button"){var w=a.parentNode;w.focus(),w.querySelector("button").blur()}a.click(),y&&y(c)}},e.onKeyDown=function(c){c.key==="Enter"&&e.onClick(c)},e.onFileDrop=function(c){var a=e.props.multiple;if(c.preventDefault(),c.type!=="dragover")if(e.props.directory)Sr(Array.prototype.slice.call(c.dataTransfer.items),e.uploadFiles,function(h){return Ze(h,e.props.accept)});else{var p=be(c.dataTransfer.files).filter(function(h){return Ze(h,e.props.accept)});a===!1&&(p=p.slice(0,1)),e.uploadFiles(p)}},e.uploadFiles=function(c){var a=be(c),p=a.map(function(h){return h.uid=Je(),e.processFile(h,a)});Promise.all(p).then(function(h){var y=e.props.onBatchStart;y==null||y(h.map(function(w){var S=w.origin,l=w.parsedFile;return{file:S,parsedFile:l}})),h.filter(function(w){return w.parsedFile!==null}).forEach(function(w){e.post(w)})})},e.processFile=function(){var c=At(He().mark(function a(p,h){var y,w,S,l,m,T,x,O,A;return He().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:if(y=e.props.beforeUpload,w=p,!y){f.next=14;break}return f.prev=3,f.next=6,y(p,h);case 6:w=f.sent,f.next=12;break;case 9:f.prev=9,f.t0=f.catch(3),w=!1;case 12:if(w!==!1){f.next=14;break}return f.abrupt("return",{origin:p,parsedFile:null,action:null,data:null});case 14:if(S=e.props.action,typeof S!="function"){f.next=21;break}return f.next=18,S(p);case 18:l=f.sent,f.next=22;break;case 21:l=S;case 22:if(m=e.props.data,typeof m!="function"){f.next=29;break}return f.next=26,m(p);case 26:T=f.sent,f.next=30;break;case 29:T=m;case 30:return x=(It(w)==="object"||typeof w=="string")&&w?w:p,x instanceof File?O=x:O=new File([x],p.name,{type:p.type}),A=O,A.uid=p.uid,f.abrupt("return",{origin:p,data:T,parsedFile:A,action:l});case 35:case"end":return f.stop()}},a,null,[[3,9]])}));return function(a,p){return c.apply(this,arguments)}}(),e.saveFileInput=function(c){e.fileInput=c},e}return Ct(r,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(i){var o=this,u=i.data,c=i.origin,a=i.action,p=i.parsedFile;if(this._isMounted){var h=this.props,y=h.onStart,w=h.customRequest,S=h.name,l=h.headers,m=h.withCredentials,T=h.method,x=c.uid,O=w||br,A={action:a,filename:S,data:u,file:p,headers:l,withCredentials:m,method:T||"post",onProgress:function(f){var $=o.props.onProgress;$==null||$(f,p)},onSuccess:function(f,$){var V=o.props.onSuccess;V==null||V(f,p,$),delete o.reqs[x]},onError:function(f,$){var V=o.props.onError;V==null||V(f,$,p),delete o.reqs[x]}};y(c),this.reqs[x]=O(A)}}},{key:"reset",value:function(){this.setState({uid:Je()})}},{key:"abort",value:function(i){var o=this.reqs;if(i){var u=i.uid?i.uid:i;o[u]&&o[u].abort&&o[u].abort(),delete o[u]}else Object.keys(o).forEach(function(c){o[c]&&o[c].abort&&o[c].abort(),delete o[c]})}},{key:"render",value:function(){var i,o=this.props,u=o.component,c=o.prefixCls,a=o.className,p=o.disabled,h=o.id,y=o.style,w=o.multiple,S=o.accept,l=o.capture,m=o.children,T=o.directory,x=o.openFileDialogOnClick,O=o.onMouseEnter,A=o.onMouseLeave,q=Ot(o,Dr),f=K((i={},R(i,c,!0),R(i,"".concat(c,"-disabled"),p),R(i,a,a),i)),$=T?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},V=p?{}:{onClick:x?this.onClick:function(){},onKeyDown:x?this.onKeyDown:function(){},onMouseEnter:O,onMouseLeave:A,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return j(u,{...V,className:f,role:"button",style:y,children:[s.createElement("input",{...Mt(q,{aria:!0,data:!0}),id:h,type:"file",ref:this.saveFileInput,onClick:function(ae){return ae.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:S,...$,multiple:w,onChange:this.onChange,...l!=null?{capture:l}:{}}),m]})}}]),r}(s.Component);function Qe(){}var tt=function(n){wt(r,n);var t=yt(r);function r(){var e;bt(this,r);for(var i=arguments.length,o=new Array(i),u=0;u<i;u++)o[u]=arguments[u];return e=t.call.apply(t,[this].concat(o)),e.uploader=void 0,e.saveUploader=function(c){e.uploader=c},e}return Ct(r,[{key:"abort",value:function(i){this.uploader.abort(i)}},{key:"render",value:function(){return d(Pr,{...this.props,ref:this.saveUploader})}}]),r}(s.Component);tt.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:Qe,onError:Qe,onSuccess:Qe,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};function je(n){return I(I({},n),{lastModified:n.lastModified,lastModifiedDate:n.lastModifiedDate,name:n.name,size:n.size,type:n.type,uid:n.uid,percent:0,originFileObj:n})}function qe(n,t){var r=be(t),e=r.findIndex(function(i){var o=i.uid;return o===n.uid});return e===-1?r.push(n):r[e]=n,r}function Ye(n,t){var r=n.uid!==void 0?"uid":"name";return t.filter(function(e){return e[r]===n[r]})[0]}function Er(n,t){var r=n.uid!==void 0?"uid":"name",e=t.filter(function(i){return i[r]!==n[r]});return e.length===t.length?null:e}var Rr=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",r=t.split("/"),e=r[r.length-1],i=e.split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(i)||[""])[0]},Rt=function(t){return t.indexOf("image/")===0},kr=function(t){if(t.type&&!t.thumbUrl)return Rt(t.type);var r=t.thumbUrl||t.url||"",e=Rr(r);return/^data:image\//.test(r)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(e)?!0:!(/^data:/.test(r)||e)},se=200;function xr(n){return new Promise(function(t){if(!n.type||!Rt(n.type)){t("");return}var r=document.createElement("canvas");r.width=se,r.height=se,r.style.cssText="position: fixed; left: 0; top: 0; width: ".concat(se,"px; height: ").concat(se,"px; z-index: 9999; display: none;"),document.body.appendChild(r);var e=r.getContext("2d"),i=new Image;if(i.onload=function(){var u=i.width,c=i.height,a=se,p=se,h=0,y=0;u>c?(p=c*(se/u),y=-(p-a)/2):(a=u*(se/c),h=-(a-p)/2),e.drawImage(i,h,y,a,p);var w=r.toDataURL();document.body.removeChild(r),t(w)},i.crossOrigin="anonymous",n.type.startsWith("image/svg+xml")){var o=new FileReader;o.addEventListener("load",function(){o.result&&(i.src=o.result)}),o.readAsDataURL(n)}else i.src=window.URL.createObjectURL(n)})}var Vr=s.forwardRef(function(n,t){var r,e=n.prefixCls,i=n.className,o=n.style,u=n.locale,c=n.listType,a=n.file,p=n.items,h=n.progress,y=n.iconRender,w=n.actionIconRender,S=n.itemRender,l=n.isImgUrl,m=n.showPreviewIcon,T=n.showRemoveIcon,x=n.showDownloadIcon,O=n.previewIcon,A=n.removeIcon,q=n.downloadIcon,f=n.onPreview,$=n.onDownload,V=n.onClose,re,ae,J=a.status,Ce=s.useState(J),Ie=Me(Ce,2),z=Ie[0],ce=Ie[1];s.useEffect(function(){J!=="removed"&&ce(J)},[J]);var Re=s.useState(!1),de=Me(Re,2),ke=de[0],Fe=de[1],ue=s.useRef();s.useEffect(function(){return ue.current=setTimeout(function(){Fe(!0)},300),function(){window.clearTimeout(ue.current)}},[]);var Se="".concat(e,"-span"),pe=y(a),ne=s.createElement("div",{className:"".concat(e,"-text-icon")},pe);if(c==="picture"||c==="picture-card")if(z==="uploading"||!a.thumbUrl&&!a.url){var oe,xe=K((oe={},R(oe,"".concat(e,"-list-item-thumbnail"),!0),R(oe,"".concat(e,"-list-item-file"),z!=="uploading"),oe));ne=s.createElement("div",{className:xe},pe)}else{var G,Ve=l!=null&&l(a)?s.createElement("img",{src:a.thumbUrl||a.url,alt:a.name,className:"".concat(e,"-list-item-image"),crossOrigin:a.crossOrigin}):pe,he=K((G={},R(G,"".concat(e,"-list-item-thumbnail"),!0),R(G,"".concat(e,"-list-item-file"),l&&!l(a)),G));ne=s.createElement("a",{className:he,onClick:function(N){return f(a,N)},href:a.url||a.thumbUrl,target:"_blank",rel:"noopener noreferrer"},Ve)}var U=K((r={},R(r,"".concat(e,"-list-item"),!0),R(r,"".concat(e,"-list-item-").concat(z),!0),R(r,"".concat(e,"-list-item-list-type-").concat(c),!0),r)),Ue=typeof a.linkProps=="string"?JSON.parse(a.linkProps):a.linkProps,Y=T?w((typeof A=="function"?A(a):A)||s.createElement(lr,null),function(){return V(a)},e,u.removeFile):null,me=x&&z==="done"?w((typeof q=="function"?q(a):q)||s.createElement(nr,null),function(){return $(a)},e,u.downloadFile):null,De=c!=="picture-card"&&s.createElement("span",{key:"download-delete",className:K("".concat(e,"-list-item-card-actions"),{picture:c==="picture"})},me,Y),Pe=K("".concat(e,"-list-item-name")),Z=a.url?[s.createElement("a",I({key:"view",target:"_blank",rel:"noopener noreferrer",className:Pe,title:a.name},Ue,{href:a.url,onClick:function(N){return f(a,N)}}),a.name),De]:[s.createElement("span",{key:"view",className:Pe,onClick:function(N){return f(a,N)},title:a.name},a.name),De],b={pointerEvents:"none",opacity:.5},C=m?s.createElement("a",{href:a.url||a.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:a.url||a.thumbUrl?void 0:b,onClick:function(N){return f(a,N)},title:u.previewFile},typeof O=="function"?O(a):O||s.createElement(zt,null)):null,L=c==="picture-card"&&z!=="uploading"&&s.createElement("span",{className:"".concat(e,"-list-item-actions")},C,z==="done"&&me,Y),M;a.response&&typeof a.response=="string"?M=a.response:M=((re=a.error)===null||re===void 0?void 0:re.statusText)||((ae=a.error)===null||ae===void 0?void 0:ae.message)||u.uploadError;var X=s.createElement("span",{className:Se},ne,Z),fe=s.useContext(nt),Le=fe.getPrefixCls,ve=Le(),ge=s.createElement("div",{className:U},s.createElement("div",{className:"".concat(e,"-list-item-info")},X),L,ke&&s.createElement(Ft,{motionName:"".concat(ve,"-fade"),visible:z==="uploading",motionDeadline:2e3},function(E){var N=E.className,$e="percent"in a?s.createElement(ar,I({},h,{type:"line",percent:a.percent})):null;return s.createElement("div",{className:K("".concat(e,"-list-item-progress"),N)},$e)})),Ge=K("".concat(e,"-list-").concat(c,"-container"),i),Te=z==="error"?s.createElement(jt,{title:M,getPopupContainer:function(N){return N.parentNode}},ge):ge;return s.createElement("div",{className:Ge,style:o,ref:t},S?S(Te,a,p,{download:$.bind(null,a),preview:f.bind(null,a),remove:V.bind(null,a)}):Te)});const Ur=Vr;var Ke=I({},qt);delete Ke.onAppearEnd;delete Ke.onEnterEnd;delete Ke.onLeaveEnd;var Lr=function(t,r){var e,i=t.listType,o=i===void 0?"text":i,u=t.previewFile,c=u===void 0?xr:u,a=t.onPreview,p=t.onDownload,h=t.onRemove,y=t.locale,w=t.iconRender,S=t.isImageUrl,l=S===void 0?kr:S,m=t.prefixCls,T=t.items,x=T===void 0?[]:T,O=t.showPreviewIcon,A=O===void 0?!0:O,q=t.showRemoveIcon,f=q===void 0?!0:q,$=t.showDownloadIcon,V=$===void 0?!1:$,re=t.removeIcon,ae=t.previewIcon,J=t.downloadIcon,Ce=t.progress,Ie=Ce===void 0?{strokeWidth:2,showInfo:!1}:Ce,z=t.appendAction,ce=t.appendActionVisible,Re=ce===void 0?!0:ce,de=t.itemRender,ke=Bt(),Fe=s.useState(!1),ue=Me(Fe,2),Se=ue[0],pe=ue[1];s.useEffect(function(){o!=="picture"&&o!=="picture-card"||(x||[]).forEach(function(b){typeof document>"u"||typeof window>"u"||!window.FileReader||!window.File||!(b.originFileObj instanceof File||b.originFileObj instanceof Blob)||b.thumbUrl!==void 0||(b.thumbUrl="",c&&c(b.originFileObj).then(function(C){b.thumbUrl=C||"",ke()}))})},[o,x,c]),s.useEffect(function(){pe(!0)},[]);var ne=function(C,L){if(a)return L==null||L.preventDefault(),a(C)},oe=function(C){typeof p=="function"?p(C):C.url&&window.open(C.url)},xe=function(C){h==null||h(C)},G=function(C){if(w)return w(C,o);var L=C.status==="uploading",M=l&&l(C)?s.createElement(gr,null):s.createElement(ur,null),X=L?s.createElement(dt,null):s.createElement(mr,null);return o==="picture"?X=L?s.createElement(dt,null):M:o==="picture-card"&&(X=L?y.uploading:M),X},Ve=function(C,L,M,X){var fe={type:"text",size:"small",title:X,onClick:function(ge){L(),ct(C)&&C.props.onClick&&C.props.onClick(ge)},className:"".concat(M,"-list-item-card-actions-btn")};if(ct(C)){var Le=lt(C,I(I({},C.props),{onClick:function(){}}));return s.createElement(te,I({},fe,{icon:Le}))}return s.createElement(te,I({},fe),s.createElement("span",null,C))};s.useImperativeHandle(r,function(){return{handlePreview:ne,handleDownload:oe}});var he=s.useContext(nt),U=he.getPrefixCls,Ue=he.direction,Y=U("upload",m),me=K((e={},R(e,"".concat(Y,"-list"),!0),R(e,"".concat(Y,"-list-").concat(o),!0),R(e,"".concat(Y,"-list-rtl"),Ue==="rtl"),e)),De=be(x.map(function(b){return{key:b.uid,file:b}})),Pe=o==="picture-card"?"animate-inline":"animate",Z={motionDeadline:2e3,motionName:"".concat(Y,"-").concat(Pe),keys:De,motionAppear:Se};return o!=="picture-card"&&(Z=I(I({},Ke),Z)),s.createElement("div",{className:me},s.createElement(_t,I({},Z,{component:!1}),function(b){var C=b.key,L=b.file,M=b.className,X=b.style;return s.createElement(Ur,{key:C,locale:y,prefixCls:Y,className:M,style:X,file:L,items:x,progress:Ie,listType:o,isImgUrl:l,showPreviewIcon:A,showRemoveIcon:f,showDownloadIcon:V,removeIcon:re,previewIcon:ae,downloadIcon:J,iconRender:G,actionIconRender:Ve,itemRender:de,onPreview:ne,onDownload:oe,onClose:xe})}),z&&s.createElement(Ft,I({},Z,{visible:Re,forceRender:!0}),function(b){var C=b.className,L=b.style;return lt(z,function(M){return{className:K(M.className,C),style:I(I(I({},L),{pointerEvents:C?"none":void 0}),M.style)}})}))},Tr=s.forwardRef(Lr);const $r=Tr;var Nr=function(n,t,r,e){function i(o){return o instanceof r?o:new r(function(u){u(o)})}return new(r||(r=Promise))(function(o,u){function c(h){try{p(e.next(h))}catch(y){u(y)}}function a(h){try{p(e.throw(h))}catch(y){u(y)}}function p(h){h.done?o(h.value):i(h.value).then(c,a)}p((e=e.apply(n,t||[])).next())})},Oe="__LIST_IGNORE_".concat(Date.now(),"__"),Or=function(t,r){var e,i=t.fileList,o=t.defaultFileList,u=t.onRemove,c=t.showUploadList,a=c===void 0?!0:c,p=t.listType,h=p===void 0?"text":p,y=t.onPreview,w=t.onDownload,S=t.onChange,l=t.onDrop,m=t.previewFile,T=t.disabled,x=T===void 0?!1:T,O=t.locale,A=t.iconRender,q=t.isImageUrl,f=t.progress,$=t.prefixCls,V=t.className,re=t.type,ae=re===void 0?"select":re,J=t.children,Ce=t.style,Ie=t.itemRender,z=t.maxCount,ce=t.data,Re=ce===void 0?{}:ce,de=t.multiple,ke=de===void 0?!1:de,Fe=t.action,ue=Fe===void 0?"":Fe,Se=t.accept,pe=Se===void 0?"":Se,ne=t.supportServerRender,oe=ne===void 0?!0:ne,xe=s.useContext(Ht),G=x||xe,Ve=Wt(o||[],{value:i,postState:function(g){return g??[]}}),he=Me(Ve,2),U=he[0],Ue=he[1],Y=s.useState("drop"),me=Me(Y,2),De=me[0],Pe=me[1],Z=s.useRef();s.useMemo(function(){var B=Date.now();(i||[]).forEach(function(g,D){!g.uid&&!Object.isFrozen(g)&&(g.uid="__AUTO__".concat(B,"_").concat(D,"__"))})},[i]);var b=function(g,D,k){var v=be(D);z===1?v=v.slice(-1):z&&(v=v.slice(0,z)),Xt.flushSync(function(){Ue(v)});var F={file:g,fileList:v};k&&(F.event=k),S==null||S(F)},C=function(g,D){return Nr(void 0,void 0,void 0,He().mark(function k(){var v,F,_,H;return He().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(v=t.beforeUpload,F=t.transformFile,_=g,!v){P.next=13;break}return P.next=5,v(g,D);case 5:if(H=P.sent,H!==!1){P.next=8;break}return P.abrupt("return",!1);case 8:if(delete g[Oe],H!==Oe){P.next=12;break}return Object.defineProperty(g,Oe,{value:!0,configurable:!0}),P.abrupt("return",!1);case 12:It(H)==="object"&&H&&(_=H);case 13:if(!F){P.next=17;break}return P.next=16,F(_);case 16:_=P.sent;case 17:return P.abrupt("return",_);case 18:case"end":return P.stop()}},k)}))},L=function(g){var D=g.filter(function(F){return!F.file[Oe]});if(D.length){var k=D.map(function(F){return je(F.file)}),v=be(U);k.forEach(function(F){v=qe(F,v)}),k.forEach(function(F,_){var H=F;if(D[_].parsedFile)F.status="uploading";else{var ie=F.originFileObj,P;try{P=new File([ie],ie.name,{type:ie.type})}catch{P=new Blob([ie],{type:ie.type}),P.name=ie.name,P.lastModifiedDate=new Date,P.lastModified=new Date().getTime()}P.uid=F.uid,H=P}b(H,v)})}},M=function(g,D,k){try{typeof g=="string"&&(g=JSON.parse(g))}catch{}if(Ye(D,U)){var v=je(D);v.status="done",v.percent=100,v.response=g,v.xhr=k;var F=qe(v,U);b(v,F)}},X=function(g,D){if(Ye(D,U)){var k=je(D);k.status="uploading",k.percent=g.percent;var v=qe(k,U);b(k,v,g)}},fe=function(g,D,k){if(Ye(k,U)){var v=je(k);v.error=g,v.response=D,v.status="error";var F=qe(v,U);b(v,F)}},Le=function(g){var D;Promise.resolve(typeof u=="function"?u(g):u).then(function(k){var v;if(k!==!1){var F=Er(g,U);F&&(D=I(I({},g),{status:"removed"}),U==null||U.forEach(function(_){var H=D.uid!==void 0?"uid":"name";_[H]===D[H]&&!Object.isFrozen(_)&&(_.status="removed")}),(v=Z.current)===null||v===void 0||v.abort(D),b(D,F))}})},ve=function(g){Pe(g.type),g.type==="drop"&&(l==null||l(g))};s.useImperativeHandle(r,function(){return{onBatchStart:L,onSuccess:M,onProgress:X,onError:fe,fileList:U,upload:Z.current}});var ge=s.useContext(nt),Ge=ge.getPrefixCls,Te=ge.direction,E=Ge("upload",$),N=I(I({onBatchStart:L,onError:fe,onProgress:X,onSuccess:M},t),{data:Re,multiple:ke,action:ue,accept:pe,supportServerRender:oe,prefixCls:E,disabled:G,beforeUpload:C,onChange:void 0});delete N.className,delete N.style,(!J||G)&&delete N.id;var $e=function(g,D){return a?s.createElement(Kt,{componentName:"Upload",defaultLocale:Gt.Upload},function(k){var v=typeof a=="boolean"?{}:a,F=v.showRemoveIcon,_=v.showPreviewIcon,H=v.showDownloadIcon,ie=v.removeIcon,P=v.previewIcon,st=v.downloadIcon;return s.createElement($r,{prefixCls:E,listType:h,items:U,previewFile:m,onPreview:y,onDownload:w,onRemove:Le,showRemoveIcon:!G&&F,showPreviewIcon:_,showDownloadIcon:H,removeIcon:ie,previewIcon:P,downloadIcon:st,iconRender:A,locale:I(I({},k),O),isImageUrl:q,progress:f,appendAction:g,appendActionVisible:D,itemRender:Ie})}):g};if(ae==="drag"){var we,xt=K(E,(we={},R(we,"".concat(E,"-drag"),!0),R(we,"".concat(E,"-drag-uploading"),U.some(function(B){return B.status==="uploading"})),R(we,"".concat(E,"-drag-hover"),De==="dragover"),R(we,"".concat(E,"-disabled"),G),R(we,"".concat(E,"-rtl"),Te==="rtl"),we),V);return s.createElement("span",null,s.createElement("div",{className:xt,onDrop:ve,onDragOver:ve,onDragLeave:ve,style:Ce},s.createElement(tt,I({},N,{ref:Z,className:"".concat(E,"-btn")}),s.createElement("div",{className:"".concat(E,"-drag-container")},J))),$e())}var Vt=K(E,(e={},R(e,"".concat(E,"-select"),!0),R(e,"".concat(E,"-select-").concat(h),!0),R(e,"".concat(E,"-disabled"),G),R(e,"".concat(E,"-rtl"),Te==="rtl"),e)),Ut=function(g){return s.createElement("div",{className:Vt,style:g},s.createElement(tt,I({},N,{ref:Z})))},it=Ut(J?void 0:{display:"none"});return h==="picture-card"?s.createElement("span",{className:K("".concat(E,"-picture-card-wrapper"),V)},$e(it,!!J)):s.createElement("span",{className:V},it,$e())},Mr=s.forwardRef(Or);const kt=Mr;var Ar=function(n,t){var r={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&t.indexOf(e)<0&&(r[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,e=Object.getOwnPropertySymbols(n);i<e.length;i++)t.indexOf(e[i])<0&&Object.prototype.propertyIsEnumerable.call(n,e[i])&&(r[e[i]]=n[e[i]]);return r},zr=s.forwardRef(function(n,t){var r=n.style,e=n.height,i=Ar(n,["style","height"]);return s.createElement(kt,I({ref:t},i,{type:"drag",style:I(I({},r),{height:e})}))});const jr=zr;var ot=kt;ot.Dragger=jr;ot.LIST_IGNORE=Oe;const qr=ot;var ht,Be;let Br=(ht=vt(({settings:n})=>({settings:n})),rt(Be=ht(Be=class extends at.Component{constructor(r){super(r);W(this,"state",{loading:!1,file:{}});W(this,"formRef",s.createRef());this.onFinish=this.onFinish.bind(this),this.closeDrawer=this.closeDrawer.bind(this)}onChangeField(r,e){r!==null&&r.target?r.target.type==="checkbox"?this.setState({[e]:r.target.checked}):this.setState({[e]:r.target.value}):this.setState({[e]:r})}async onFinish(){const{intl:{formatMessage:r}}=this.props;this.setState({loading:!0});try{const{create:e,update:i}=this.props,o=await e(this.state.file.file);o.status===200?(this.closeDrawer(),ee.success({message:r({id:"Vaucher.Uploaded"}),description:r({id:"Vaucher.Vouchers successfully uploaded!"})}),this.closeDrawer(),i()):(await this.setState({file:{}}),this.closeDrawer(),ee.error({message:r({id:"window.error"}),description:o.statusText,placement:"topLeft"}),await this.setState({file:{}}))}catch(e){await this.setState({file:{}}),console.log("Failed:",e),this.closeDrawer()}}async closeDrawer(){const{onClose:r}=this.props;this.formRef.current.resetFields(),await this.setState({file:{}}),r()}render(){const{visible:r,intl:{formatMessage:e}}=this.props;return this.state,d(gt,{title:"Upload new vouchers",onCancel:this.closeDrawer,open:r,bodyStyle:{paddingBottom:10},okButtonProps:{hidden:!0},cancelButtonProps:{hidden:!0},footer:"",children:j(Q,{ref:this.formRef,layout:"vertical",onFinish:this.onFinish,children:[j(qr.Dragger,{name:"file",showUploadList:!1,beforeUpload:async i=>{await this.setState({file:{file:i}}),console.log(this.state.file)},children:[d("div",{children:this.state.file.file&&"New file ready to upload"}),d(te,{children:e({id:"Vaucher.Choose or drag an excel file"})})]}),d("div",{className:"form-actions",children:j(Q.Item,{children:[d(te,{style:{width:150},type:"primary",htmlType:"submit",className:"mr-3",children:e({id:"window.upload"})}),d(te,{onClick:this.closeDrawer,children:e({id:"window.cancel"})})]})})]})})}})||Be)||Be);const{VITE_API_BASE_URL:_r}={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0},Hr=n=>{let t=new FormData;t.append("file",n.file);const r=localStorage.getItem("accessToken");return fetch(`${_r}${n.endpoint}`,{method:"POST",body:t,headers:{Authorization:`Bearer ${r}`}})},mt=async()=>Ae({method:"GET",endpoint:"/voucher"}).fetch(),Wr=async n=>{const t={method:"DELETE",endpoint:`/voucher/${n}`};return Ae(t).fetch()},Kr=async n=>Ae({method:"POST",endpoint:"/voucher",body:n}).fetch(),Gr=async n=>{const t={method:"POST",endpoint:`/voucher/mark-as-sent/${n}`};return Ae(t).fetch()},Xr=async n=>{const t={method:"POST",endpoint:`/voucher/accept/${n}`};return Ae(t).fetch()},Jr=async n=>Hr({endpoint:"/voucher-info",file:n});var ft;let ua=rt(ft=class extends at.Component{constructor(r){super(r);W(this,"state",{tableData:[],data:[],filterDropdownVisible:!1,searchText:"",filtered:!1,loading:!0,createFormVisible:!1,uploadFormVisible:!1});W(this,"onInputChange",r=>{this.setState({searchText:r.target.value})});W(this,"onSearch",()=>{const{searchText:r,tableData:e}=this.state,i=new RegExp(r,"gi");this.setState({filterDropdownVisible:!1,filtered:!!r,data:e.map(o=>{const u=o.name.match(i);return u?{...o,name:d("span",{children:o.name.split(i).map((c,a)=>a>0?[d("span",{className:"highlight",children:u[0]},c),c]:c)})}:null}).filter(o=>!!o)}),r===""&&this.setState({filtered:!1})});W(this,"showCreateForm",()=>{this.setState({createFormVisible:!0})});W(this,"onCloseCreateForm",()=>{this.setState({createFormVisible:!1})});W(this,"showUploadForm",()=>{this.setState({uploadFormVisible:!0})});W(this,"onCloseUploadForm",()=>{this.setState({uploadFormVisible:!1})});W(this,"refSearchInput",r=>{this.searchInput=r});this.onCloseCreateForm=this.onCloseCreateForm.bind(this),this.update=this.update.bind(this)}UNSAFE_componentWillMount(){mt().then(async r=>{const e=await r.json();this.setState({tableData:e.result,data:e.result,loading:!1})})}update(r="all"){this.setState({loading:!0}),mt().then(async e=>{const i=await e.json();this.setState({tableData:i.result,data:i.result,loading:!1})}).finally(()=>{this.setState({loading:!1})})}render(){const{data:r,searchText:e,filterDropdownVisible:i,filtered:o,createFormVisible:u,uploadFormVisible:c}=this.state,{intl:{formatMessage:a}}=this.props,p=async l=>{const m=await Wr(l);m.status===204?(ee.success({message:a({id:"window.success"}),description:a({id:"Vaucher.Voucher successfully removed!"})}),this.update()):ee.error({message:a({id:"window.error"}),description:m.statusText})},h=async l=>{const m=await Gr(l);m.status===200?(ee.success({message:a({id:"window.success"}),description:"Voucher successfully marked!"}),this.update()):ee.error({message:a({id:"window.error"}),description:m.statusText})},y=async l=>{const m=await Xr(l);m.status===200?(ee.success({message:a({id:"window.success"}),description:a({id:"Vaucher.Voucher successfully accepted!"})}),this.update()):ee.error({message:a({id:"window.error"}),description:m.statusText})},w=(l,m=!1,T=!1)=>j(Xe,{style:{padding:"0px"},children:[!m&&d(Xe.Item,{onClick:()=>y(l),style:{backgroundColor:"LimeGreen",color:"AliceBlue",fontWeight:"bolder"},children:a({id:"window.accept"})},"accept"),!T&&d(Xe.Item,{onClick:()=>p(l),style:{backgroundColor:"LightCoral",color:"AliceBlue",fontWeight:"bolder"},children:a({id:"window.remove"})},"remove")]}),S=[{title:a({id:"window.name"}),dataIndex:"name",key:"name",render:l=>d("span",{children:l}),filterDropdown:j("div",{className:"custom-filter-dropdown",children:[d(_e,{ref:this.refSearchInput,placeholder:a({id:"Vaucher.Search name"}),value:e,onChange:this.onInputChange,onPressEnter:this.onSearch}),d(te,{type:"primary",onClick:this.onSearch,style:{marginTop:"5px"},children:a({id:"Vaucher.Search"})})]}),filterIcon:d(Jt,{style:{color:o?"#108ee9":"#aaa"}}),filterDropdownVisible:i,onFilterDropdownVisibleChange:l=>{this.setState({filterDropdownVisible:l},()=>this.searchInput&&this.searchInput.focus())}},{title:a({id:"window.phone"}),dataIndex:"phone",key:"phone",render:l=>d("span",{children:l})},{title:a({id:"window.email"}),dataIndex:"email",key:"email",render:l=>d("span",{children:l})},{title:a({id:"Vaucher.Expiration Date"}),dataIndex:"expirationDate",key:"expirationDate",render:l=>d("span",{children:l?or(Zt(l)):""}),sorter:(l,m)=>l.days-m.days},{title:a({id:"Vaucher.Price"}),dataIndex:"price",key:"price",render:l=>d("span",{children:`${l}`}),sorter:(l,m)=>l.price-m.price},{title:a({id:"Vaucher.Code"}),dataIndex:"promo",key:"code",render:l=>d("span",{children:`${l.code}`})},{title:a({id:"Vaucher.Status"}),dataIndex:"promo",key:"status",render:l=>d("span",{className:l.active===!0?"font-size-12 badge badge-success":"font-size-12 badge badge-danger",children:l.active?a({id:"Vaucher.Active"}):a({id:"Vaucher.Disabled"})}),sorter:(l,m)=>l.promo.active-m.promo.active},{title:a({id:"Vaucher.Invoice"}),dataIndex:"isPaid",key:"isPaid",render:(l,m)=>d("span",{className:l===!0?"font-size-12 badge badge-success":m.invoice?"font-size-12 badge badge-primary":"font-size-12 badge badge-default",children:l?"Paid":m.invoice?a({id:"Vaucher.Pending"}):a({id:"Vaucher.None"})}),sorter:(l,m)=>l.isPaid-m.isPaid},{title:a({id:"Vaucher.Sent?"}),dataIndex:"isSent",key:"isSent",render:l=>d("span",{className:l===!0?"font-size-12 badge badge-success":"font-size-12 badge badge-danger",children:a(l?{id:"window.yes"}:{id:"window.no"})}),sorter:(l,m)=>l.isSent-m.isSent},{title:a({id:"Vaucher.Action"}),dataIndex:"id",key:"action",render:(l,m)=>d("span",{children:d(Qt.Button,{overlay:w(l,m.invoice,m.isPaid),onClick:()=>h(l),children:a({id:"Vaucher.Mark as sent"})})})}];return j(Yt,{roles:["root","admin","sales","salesDirector"],denied:["Dany"],redirect:!0,to:"/main",children:[d(er,{title:a({id:"Vaucher.Vouchers"})}),j("div",{className:"card",children:[j("div",{className:"card-header",style:{display:"flex",justifyContent:"space-between"},children:[d("div",{className:"utils__title",children:d("strong",{children:a({id:"Vaucher.Vouchers"})})}),j("div",{style:{float:"right"},children:[d(te,{type:"primary",onClick:this.showUploadForm,style:{marginRight:"10px"},children:a({id:"Vaucher.Upload vouchers"})}),d(te,{type:"primary",onClick:this.showCreateForm,children:a({id:"Vaucher.Create new Voucher"})})]})]}),d("div",{className:"card-body",children:d(tr,{tableLayout:"auto",scroll:{x:"100%"},columns:S,dataSource:r,pagination:{position:"bottom",total:r.length,showTotal:(l,m)=>`${m[0]}-${m[1]} of ${l} items`,showSizeChanger:!0,pageSizeOptions:["10","20","50","100","200"],hideOnSinglePage:r.length<10},loading:this.state.loading,rowKey:()=>Math.random()})})]}),d(Br,{visible:c,create:Jr,onClose:this.onCloseUploadForm,update:this.update}),d(wr,{visible:u,create:Kr,onClose:this.onCloseCreateForm,update:this.update})]})}})||ft;export{ua as default};
