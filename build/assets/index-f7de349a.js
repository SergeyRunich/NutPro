import{be as h,a as g,j as t,aa as b,aX as v,c as f,aZ as u,dx as I,a3 as m,r as o,b as p,dy as T,a8 as w}from"./index-c20b5e8e.js";import{T as M}from"./Table-fe15f1b3.js";import"./Pagination-e2a53e90.js";/* empty css              */import{T as y}from"./index-8e340a60.js";import"./styleChecker-a7b568e2.js";function x(r){const s=g(),i=async e=>{const a=await I(e);a.ok?(m.success({message:s.formatMessage({id:"window.success"})}),await r.show()):m.error({placement:"topLeft",message:s.formatMessage({id:"window.error"}),description:a.statusText})},d=(e,a,n,c)=>f(u,{style:{padding:"0px"},children:[a!=="closed"&&f(u.Item,{onClick:()=>i({id:e,status:n}),children:[s.formatMessage({id:"TableOfInvoices.MarkAsSPACE"})," ",n]},"cdfd"),t(u.Item,{children:t("a",{href:c,rel:"noopener noreferrer",target:"_blank",children:s.formatMessage({id:"TableOfInvoices.OpenInvoice"})})},Math.random())]}),l=[{title:s.formatMessage({id:"window.date"}),dataIndex:"date",key:"date",render:e=>t("span",{children:`${b(e).format("DD.MM.YYYY HH:mm")}`})},{title:s.formatMessage({id:"TableOfInvoices.Number"}),dataIndex:"number",key:"number",render:e=>e},{title:s.formatMessage({id:"window.name"}),dataIndex:"order",key:"order",render:e=>t("a",{href:`/admin/#/orders/${e.id}`,rel:"noopener noreferrer",target:"_blank",children:e.name})},{title:s.formatMessage({id:"TableOfInvoices.RefundAmount"}),dataIndex:"refund_amount",key:"refund_amount",render:e=>t("span",{children:`${e} KÄ`}),sorter:(e,a)=>e.refund_amount-a.refund_amount},{title:s.formatMessage({id:"TableOfInvoices.Status"}),dataIndex:"status",key:"status",filters:[{text:s.formatMessage({id:"TableOfInvoices.Waiting"}),value:"waiting"},{text:s.formatMessage({id:"TableOfInvoices.Refunded"}),value:"refunded"},{text:s.formatMessage({id:"TableOfInvoices.Closed"}),value:"closed"}],onFilter:(e,a)=>a.status.indexOf(e)===0,render:e=>t(y,{color:{waiting:"blue",refunded:"orange",closed:"green"}[e],children:e})},{title:"",dataIndex:"url",key:"url",render:(e,a)=>{const n=a.status==="waiting"?"refunded":"closed";return t(v.Button,{overlay:d(a.id,a.status,n,a.pdf),style:{float:"right"},type:"primary",children:t("a",{href:e,rel:"noopener noreferrer",target:"_blank",children:s.formatMessage({id:"TableOfInvoices.OpenInFakturoid"})})})}}];return t("div",{children:t(M,{className:"utils__scrollTable",tableLayout:"auto",scroll:{x:"100%"},columns:l,dataSource:r.data,rowKey:()=>Math.random(),pagination:{position:"bottom",total:r.data.length,showTotal:(e,a)=>`${a[0]}-${a[1]} of ${e} items`,showSizeChanger:!0,pageSizeOptions:["10","20","50","100","200"],hideOnSinglePage:r.data.length<10},loading:r.loading})})}const O=h(x),$=()=>{const[r,s]=o.useState(!0),[i,d]=o.useState([]),{formatMessage:l}=g(),e=p(),a=o.useCallback(()=>{s(!0),T().then(async n=>{if(n.status===401){e({type:"user/SET_STATE",payload:{authorized:!1}});return}if(n.status===200){const c=await n.json();d(c.result)}else m.error({message:n.status,description:n.statusText})}).finally(()=>s(!1))},[]);return o.useEffect(()=>{document.title="Invoices for refund",a()},[a]),t(w,{roles:["root","finance"],redirect:!0,to:"/main",children:t("div",{className:"row",children:t("div",{className:"col-lg-12",children:f("div",{className:"card",children:[t("div",{className:"card-header",children:t("div",{className:"utils__title",children:t("strong",{children:l({id:"TableOfInvoices.InvoicesForRefund"})})})}),t("div",{className:"card-body",children:t(O,{data:i,loading:r,show:a})})]})})})})};export{$ as default};
