import{aa as l,r as o,bO as Y,a as S,a3 as w,j as e,c as s,bF as y}from"./index-c20b5e8e.js";import{L as B}from"./index-26b6fa13.js";import{R as j,C as g}from"./row-58ed805b.js";import"./Pagination-e2a53e90.js";import{S as r}from"./index-297358d3.js";import{C as U}from"./index-9edbcc8e.js";import{b as F}from"./users-d1e7edcf.js";import"./padStart-17be0050.js";import"./index-f21ef7a8.js";import"./PickerPanel-72c5d64a.js";/* empty css              */import"./index-372ade24.js";import"./EditOutlined-c424161b.js";import"./styleChecker-a7b568e2.js";l.updateLocale("en",{week:{dow:1}});const E=["Breakfast","Snack 1","Lunch","Snack 2","Dinner","Dinner 2"],K=()=>{const[d,L]=o.useState(l.utc().hours(0).minutes(0).seconds(0).milliseconds(0).unix()),[M,v]=o.useState([]),[x,C]=o.useState([]),[c,b]=o.useState({}),[f,m]=Y().pathname.split("/").slice(-2),u=S(),{formatMessage:i}=u,h=o.useCallback(async()=>{const n=await F({order:m,user:f});if(n.ok){const a=await n.json();v(a.days),b(a.user),C(a.result)}},[f,m]),k=n=>{const a=l.utc(n.format("DD.MM.YYYY"),"DD.MM.YYYY").unix();L(a)},D=n=>{let a={};return x.forEach(p=>{p.timestamp===n&&(a=p)}),a};o.useEffect(()=>{document.title="User menu",h().catch(()=>{w.error({message:u.formatMessage({id:"window.error"}),description:"User menu not found",placement:"topRight"})})},[h,u]);const N=M.map(n=>l.unix(n).format("DD-MM-YYYY")),t=D(d);return e("div",{children:s("div",{className:"card",children:[e("div",{className:"card-header",children:e("div",{className:"utils__title",children:e("strong",{children:i({id:"MenuList.UserMenu"})})})}),e("div",{className:"card-body",children:s(j,{children:[e(g,{sm:24,lg:7,children:s("div",{className:"text-center mb-1 mr-1",children:[e("h4",{children:s(y,{to:`/users/${c.id}`,children:[e("i",{className:"icmn-user mr-1"}),c.name]})}),Boolean(t.order)&&e("h4",{children:e(y,{to:`/orders/${t.order}`,children:i({id:"MenuList.ViewOrder"})})}),s("h4",{children:[l.weekdays(l.unix(d).isoWeekday())," ",l.unix(d).format("DD.MM.YYYY")]}),e(U,{onSelectChange:k,highlightedDays:N,isActive:!0}),e("br",{}),Boolean(t.order)&&s("div",{children:[e("h4",{children:i({id:"MenuList.RequiredMacro"})}),s("div",{style:{display:"flex",justifyContent:"center"},children:[e(r,{style:{},title:"kCal",value:t.shouldBe.kcal}),e(r,{style:{marginLeft:"7px"},title:i({id:"MenuList.Protein"}),value:t.shouldBe.prot}),e(r,{style:{marginLeft:"7px"},title:i({id:"MenuList.Fat"}),value:t.shouldBe.fat}),e(r,{style:{marginLeft:"7px"},title:i({id:"MenuList.Carbo"}),value:t.shouldBe.carb})]})]}),Boolean(t.order)&&s("div",{children:[e("br",{}),e("h4",{children:i({id:"MenuList.GeneratedMacro"})}),s("div",{style:{display:"flex",justifyContent:"center"},children:[e(r,{title:"kCal",value:t.nutrients?t.nutrients.kcal:""}),e(r,{style:{marginLeft:"10px"},title:i({id:"MenuList.Protein"}),value:t.nutrients?t.nutrients.prot:""}),e(r,{style:{marginLeft:"10px"},title:i({id:"MenuList.Fat"}),value:t.nutrients?t.nutrients.fat:""}),e(r,{style:{marginLeft:"10px"},title:i({id:"MenuList.Carbo"}),value:t.nutrients?t.nutrients.carb:""})]})]}),Boolean(t.order)&&s("div",{children:[e("br",{}),e("h4",{children:i({id:"MenuList.OriginalMacro"})}),s("div",{style:{display:"flex",justifyContent:"center"},children:[e(r,{title:i({id:"MenuList.kCal"}),value:t.originalNutrients?t.originalNutrients.kcal:""}),e(r,{style:{marginLeft:"10px"},title:i({id:"MenuList.Protein"}),value:t.originalNutrients?t.originalNutrients.prot:""}),e(r,{style:{marginLeft:"10px"},title:i({id:"MenuList.Fat"}),value:t.originalNutrients?t.originalNutrients.fat:""}),e(r,{style:{marginLeft:"10px"},title:i({id:"MenuList.Carbo"}),value:t.originalNutrients?t.originalNutrients.carb:""})]})]})]})}),e(g,{sm:24,lg:17,children:e(B,{size:"small",dataSource:t.dishes,renderItem:n=>e("div",{className:"card",style:{border:"1px solid #e4e9f0"},children:s("div",{className:"card-body",children:[s("div",{style:{float:"left"},children:[e("h4",{children:E[n.meal]}),n.title]}),s("div",{style:{alignContent:"center",float:"right"},children:[e(r,{style:{float:"left"},title:i({id:"MenuList.Energy"}),value:n.nutrients.kcal,suffix:"kCal"}),e(r,{style:{float:"left",marginLeft:"30px"},title:i({id:"MenuList.Protein"}),value:n.nutrients.prot,suffix:"g"}),e(r,{style:{float:"left",marginLeft:"30px"},title:i({id:"MenuList.Fat"}),value:n.nutrients.fat,suffix:"g"}),e(r,{style:{float:"left",marginLeft:"30px"},title:i({id:"MenuList.Carbo"}),value:n.nutrients.carb,suffix:"g"}),e(r,{style:{float:"left",marginLeft:"30px"},title:i({id:"MenuList.Weight"}),value:n.amount*1e3,suffix:"g"})]})]})})})})]})})]})})};export{K as default};
