var xe=Object.defineProperty;var ke=(s,m,h)=>m in s?xe(s,m,{enumerable:!0,configurable:!0,writable:!0,value:h}):s[m]=h;var X=(s,m,h)=>(ke(s,typeof m!="symbol"?m+"":m,h),h);import{a2 as _e,c as n,j as e,r as w,a as B,aa as f,I as D,a6 as De,B as b,a4 as Be,b4 as W,a5 as q,a3 as v,b0 as O,bF as F,bQ as Se,u as Me,bg as Ae,bp as Te,a8 as J}from"./index-c20b5e8e.js";import{C as Fe}from"./index-f21ef7a8.js";import"./PickerPanel-72c5d64a.js";/* empty css              */import{P as Re}from"./index-67f4e7c4.js";import{R as ee}from"./index-48cd5627.js";import{T as Ee}from"./index-83b0f9b6.js";import{F as y}from"./index-a86cfb93.js";import{R as A,C as I}from"./row-58ed805b.js";import{u as P,g as L}from"./components-ada4a050.js";import{T as K}from"./Table-fe15f1b3.js";import"./Pagination-e2a53e90.js";import{I as x}from"./index-86d1917a.js";import{D as j}from"./index-2f7554ca.js";import{T as se}from"./Timeline-b7d37d0b.js";import{g as Pe}from"./kitchen-60ac824b.js";import{D as R,A as ye,a as $,S as ge,U as ae,b as te,c as H,d as re,e as Le,f as ie,g as ne,h as $e,T as V,L as de,i as le,j as ce}from"./constants-480696f2.js";import{D as qe}from"./index-1e692111.js";import{b as Oe}from"./order-d29e3517.js";import{c as He,r as oe,e as Ve,a as ze,b as We,d as Ke,s as je,p as Ge,f as Ye,g as Ze,h as Qe,i as Xe,j as Je,k as es,l as ss}from"./customer-fbff77ee.js";import"./padStart-17be0050.js";import"./styleChecker-a7b568e2.js";import"./index-8e340a60.js";const as="_donut_dx0b2_1",ts="_primary_dx0b2_16",rs="_secondary_dx0b2_20",is="_success_dx0b2_24",ns="_warning_dx0b2_28",ds="_danger_dx0b2_32",ls="_info_dx0b2_36",me={donut:as,default:"_default_dx0b2_12",primary:ts,secondary:rs,success:is,warning:ns,danger:ds,info:ls};class z extends _e.Component{render(){const{name:m,color:h,type:r}=this.props;return n("span",{className:"mr-2 text-nowrap",children:[e("span",{className:`${me.donut} ${h===void 0?me[r]:""}`,style:h!==void 0?{borderColor:h}:{}}),m]})}}X(z,"defaultProps",{name:"Donut",type:"default",color:void 0});const cs=({data:s})=>{const[m,h]=w.useState([]),{formatMessage:r}=B(),u=[{title:r({id:"window.date"}),dataIndex:"timestamp",key:"timestamp",render:i=>e("span",{children:`${f.unix(i).format("DD.MM.YYYY HH:mm")}`})},{title:r({id:"ListDataset.Age"}),dataIndex:"data",key:"age",render:i=>e("span",{children:` ${i.age}`})},{title:r({id:"ListDataset.Weight"}),dataIndex:"data",key:"weight",render:i=>e("span",{children:` ${i.weight}`})},{title:r({id:"ListDataset.Height"}),dataIndex:"data",key:"height",render:i=>e("span",{children:` ${i.height}`})},{title:r({id:"ListDataset.PBF"}),dataIndex:"data",key:"PBF",render:i=>e("span",{children:` ${i.PBF}`})},{title:r({id:"ListDataset.BMR"}),dataIndex:"data",key:"BMR",render:i=>e("span",{children:` ${i.BMR}`})},{title:r({id:"ListDataset.Muscle"}),dataIndex:"data",key:"muscle",render:i=>e("span",{children:` ${i.muscle}`})},{title:r({id:"ListDataset.VFA"}),dataIndex:"data",key:"VFA",render:i=>e("span",{children:` ${i.VFA}`})},{title:r({id:"ListDataset.BMI"}),dataIndex:"data",key:"BMI",render:i=>e("span",{children:` ${i.BMI}`})},{title:r({id:"ListDataset.TBW"}),dataIndex:"data",key:"TBW",render:i=>e("span",{children:` ${i.TBW}`})}];return w.useEffect(()=>{h(s.result)},[s]),e("div",{children:e(K,{className:"utils__scrollTable",tableLayout:"auto",scroll:{x:"100%"},columns:u,dataSource:m,pagination:{position:"bottom",total:m&&m.length,showTotal:(i,d)=>`${d[0]}-${d[1]} of ${i} items`,showSizeChanger:!0,pageSizeOptions:["10","20","50","100","200"],hideOnSinglePage:m&&m.length<10},rowKey:()=>Math.random().toString()})})},os=({data:s,onSend:m})=>{const[h]=y.useForm(),{formatMessage:r}=B(),[u,i]=w.useState(!1),d={address:s.address,birthday:s.birthday,companyName:s.paymentData.companyName,email:s.email,inBodyId:s.inBodyId,isCompany:s.paymentData.isCompany,name:s.name,paymentAddress:s.paymentData.address,phone:s.phone,regNumber:s.paymentData.regNumber,vatNumber:s.paymentData.vatNumber,zip:s.paymentData.zip},[t,a]=w.useState(d),g=o=>{o!==null&&a(k=>({...k,birthday:o.utc().toISOString()}))},p=(o,k)=>{if(!o||!o.target||typeof o.target!="object"){a(l=>({...l,[k]:o}));return}o.target.type==="checkbox"?a(l=>({...l,[k]:o.target.checked})):a(l=>({...l,[k]:o.target.value})),o.persist&&o.persist()},_=()=>{h.setFieldsValue(d),a(d)},S=async()=>{i(!0);try{await h.validateFields();const o={address:t.address,birthday:t.birthday,email:t.email,inBodyId:t.inBodyId,name:t.name,phone:t.phone,paymentData:{address:t.paymentAddress,companyName:t.companyName,isCompany:t.isCompany,regNumber:t.regNumber,vatNumber:t.vatNumber,zip:t.zip}};await m(o)}catch(o){console.log("Failed:",o)}i(!1)};return w.useEffect(()=>{const o={companyName:s.paymentData.companyName,isCompany:s.paymentData.isCompany,paymentAddress:s.paymentData.address,regNumber:s.paymentData.regNumber,vatNumber:s.paymentData.vatNumber,zip:s.paymentData.zip};a({...s,...o})},[s]),w.useEffect(()=>{h.setFieldsValue({name:t.name,inBodyId:t.inBodyId,phone:t.phone,email:t.email,address:t.address,paymentAddress:t.paymentAddress,birthday:t.birthday?f(t.birthday):null,zip:t.zip,companyName:t.companyName,regNumber:t.regNumber,vatNumber:t.vatNumber})},[t]),n(y,{form:h,layout:"vertical",onFinish:S,className:"login-form",children:[e("h5",{className:"text-black mt-4",children:e("strong",{children:r({id:"Users.Personal Information"})})}),n("div",{className:"row",children:[e("div",{className:"col-lg-6",children:e(y.Item,{name:"name",label:r({id:"window.name"}),rules:[{required:!0}],children:e(D,{placeholder:r({id:"window.name"}),onChange:o=>p(o,"name")})})}),e("div",{className:"col-lg-6",children:e(y.Item,{label:r({id:"Users.InBodyId"}),name:"inBodyId",rules:[{required:!0}],children:e(D,{placeholder:r({id:"Users.InBodyId"}),onChange:o=>p(o,"inBodyId")})})})]}),n("div",{className:"row",children:[e("div",{className:"col-lg-6",children:e(y.Item,{label:r({id:"window.phone"}),name:"phone",rules:[{required:!1}],children:e(D,{placeholder:r({id:"window.phone"}),onChange:o=>p(o,"phone")})})}),e("div",{className:"col-lg-6",children:e(y.Item,{label:r({id:"window.email"}),name:"email",rules:[{type:"email"},{required:!1}],children:e(D,{placeholder:r({id:"window.email"}),onChange:o=>p(o,"email")})})})]}),n("div",{className:"row",children:[e("div",{className:"col-lg-6",children:e(y.Item,{label:r({id:"window.address"}),name:"address",rules:[{required:!1}],children:e(D,{placeholder:r({id:"window.address"}),onChange:o=>p(o,"address")})})}),e("div",{className:"col-lg-6",children:e(y.Item,{label:r({id:"Users.Billing address"}),name:"paymentAddress",rules:[{required:!1}],children:e(D,{placeholder:r({id:"Users.Billing address"}),onChange:o=>p(o,"paymentAddress")})})})]}),e("div",{className:"row",children:e("div",{className:"col-lg-6",children:e(y.Item,{label:r({id:"Users.Date of birth"}),name:"birthday",children:e(j,{style:{width:"100%",marginTop:10},format:"DD.MM.YYYY",placeholder:r({id:"window.date"}),value:t.birthday?f(t.birthday):"",onChange:o=>g(o)})})})}),e("div",{className:"row",children:n("div",{className:"col-lg-4",children:[e(De,{placeholder:r({id:"Users.Company?"}),checked:t.isCompany,onChange:o=>p(o,"isCompany")})," ",r({id:"Users.This is company"})]})}),t.isCompany&&n("div",{className:"row",children:[e("div",{className:"col-lg-4",children:e(y.Item,{label:r({id:"Users.Company name"}),name:"companyName",rules:[{required:t.isCompany}],children:e(D,{style:{width:"100%"},placeholder:r({id:"Users.Company name"}),onChange:o=>p(o,"companyName")})})}),e("div",{className:"col-lg-2",children:e(y.Item,{label:r({id:"Users.ZIP"}),name:"zip",rules:[{required:t.isCompany}],children:e(x,{min:0,placeholder:r({id:"Users.ZIP"}),onChange:o=>p(o,"zip")})})}),e("div",{className:"col-lg-3",children:e(y.Item,{label:r({id:"Users.IČO"}),name:"regNumber",rules:[{required:t.isCompany}],children:e(x,{placeholder:r({id:"Users.IČO"}),min:0,style:{width:"100%"},onChange:o=>p(o,"regNumber")})})}),e("div",{className:"col-lg-3",children:e(y.Item,{label:r({id:"Users.DIČ"}),name:"vatNumber",rules:[{required:t.isCompany}],children:e(D,{placeholder:r({id:"Users.DIČ"}),onChange:o=>p(o,"vatNumber")})})})]}),e("div",{className:"form-actions",children:n(y.Item,{children:[e(b,{loading:u,style:{width:150},type:"primary",htmlType:"submit",className:"mr-3",children:r({id:"window.save"})}),e(b,{disabled:u,onClick:_,children:r({id:"window.reset"})})]})})]})},ms=({visible:s,onCreate:m,onCancel:h})=>{const[r]=y.useForm(),[,u]=w.useState(""),{formatMessage:i}=B(),d=()=>{r.validateFields().then(t=>{r.resetFields(),m(t),u("")}).catch(t=>{console.error("Validation failed:",t)})};return e(Be,{open:s,title:i({id:"Users.Create a new password"}),okText:i({id:"window.save"}),cancelText:i({id:"window.cancel"}),onCancel:h,onOk:d,children:e(y,{layout:"vertical",name:"form_in_modal",children:e(y.Item,{label:i({id:"Users.Password"}),name:"password",rules:[{required:!0}],children:e(D,{type:"password",placeholder:i({id:"Users.Please enter password"}),onChange:t=>u(t.target.value)})})})})},{Option:hs}=q;f.updateLocale("en",{week:{dow:1}});const us=(s,m)=>{if(s===null)return!0;const h=f().endOf("day"),r=f.unix(m),u=h>r?h:r;return s<u?!0:![1,3,5].includes(s.day())},be=({current:s,kitchenHistory:m,push:h,onDeleteLast:r})=>{const{formatMessage:u}=B(),[i,d]=w.useState(""),[t,a]=w.useState({key:""}),g=P(L(be,"kitchens"),async()=>(await Pe()).json(),{retry:!1,cacheTime:0,onError:p=>v.error({message:`Failed to obtain kitchens list: ${p.message}`})});return w.useEffect(()=>{g.data&&a({key:g.data[0].id})},[g.data]),!g.isFetched||!g.data?e("div",{style:{textAlign:"center",display:"block"},children:e(W,{spinning:!0})}):n(A,{gutter:5,children:[e(I,{md:12,sm:24,children:e("div",{style:{padding:"5px"},children:e(se,{mode:"left",children:m.map((p,_)=>e(se.Item,{color:_===m.length-1?"green":"blue",children:`[${f.unix(p.start).format(R)}] ${p.kitchen.name}`},Math.random()))})})}),n(I,{md:12,sm:24,children:[n("div",{children:[n("div",{children:[e("b",{children:u({id:"Users.Current kitchen:"})}),` ${s.name}`]}),n("div",{children:[e("b",{children:u({id:"Users.From:"})}),` ${f.unix(s.start).format(R)}`]}),n("div",{children:[e("b",{children:u({id:"Users.Last change:"})}),` ${f.unix(s.timestamp).format(R)}`]}),s.start>f().unix()&&e("div",{children:e(b,{type:"primary",danger:!0,onClick:()=>r(),children:u({id:"Users.Delete last"})})})]}),e("hr",{}),e("h5",{children:u({id:"Users.Set new kitchen:"})}),e(q,{labelInValue:!0,defaultValue:{key:s.id},style:{width:"115px",marginTop:"0px",marginRight:"20px"},onChange:p=>a({key:p.key}),value:t,children:g.data.map(p=>e(hs,{value:p.id,children:p.name},p.id))}),e(j,{style:{marginTop:"15px"},format:R,disabledDate:p=>us(p,s.start),onChange:(p,_)=>d(_)}),e("div",{children:e(b,{type:"primary",style:{marginTop:"10px"},onClick:()=>h({kitchenId:t.key,startDate:i}),children:u({id:"window.save"})})})]})]})},{Option:he}=q,ps=({sex:s,age:m,weight:h,height:r,PBF:u,type:i})=>{const d=370+21.6*(h-h*(u/100)-2.5),t=s===ge?66+13.7*h+5*r-6.8*m:655+9.6*h+1.8*r-4.7*m;return Math.round(i===ye?d:t)},ue={age:0,weight:0,height:0,sex:ge,BMR:null,BMI:0,PBF:0,VFA:0,TBW:0,muscle:0},ys=({onClose:s,onCreate:m,update:h,userId:r,visible:u})=>{const[i]=y.useForm(),{formatMessage:d}=B(),[t,a]=w.useState({...ue,type:ye,timestamp:f().unix()}),g=(l,N)=>{if(l===null||!l.target){a(M=>({...M,[N]:l}));return}if(l.target.type==="checkbox"){a(M=>({...M,[N]:l.target.checked}));return}a(M=>({...M,[N]:l.target.value}))},p=l=>{l!==null&&a(N=>({...N,timestamp:l.unix()}))},_=async l=>{a(N=>({...N,type:l.target.value}))},S=()=>{a(l=>({...l,...ue})),i.resetFields(),s()},o=async()=>{try{await i.validateFields();const l={...t,VFA:t.VFA||0,TBW:t.TBW||0,muscle:t.muscle||0,BMI:t.BMI||0};if(l.BMR<800){v.error({message:d({id:"window.error"}),description:d({id:"Users.BMR is required!"}),placement:"topLeft"});return}const N=await m(r,l);N.status===202?(h(),S(),v.success({message:d({id:"Users.Created"}),description:d({id:"Users.Dataset successfully created!"})})):v.error({message:d({id:"window.error"}),description:N.statusText,placement:"topLeft"})}catch(l){console.log("Failed:",l)}};let k=1080;return typeof window.innerWidth<"u"&&(k=window.innerWidth),w.useEffect(()=>{i.setFieldsValue({timestamp:f.unix(t.timestamp)})},[]),n(qe,{title:d({id:"Users.Create a new dataset"}),width:k<768?"100%":"auto",onClose:S,open:u,bodyStyle:{paddingBottom:80},children:[e("div",{style:{marginRight:"20px",marginBottom:"20px",textAlign:"center"},children:n(O.Group,{value:t.type,onChange:_,children:[e(O.Button,{value:"mcArdle",children:d({id:"Users.McArdle"})}),e(O.Button,{value:"harrisBenedict",children:d({id:"Users.Harris–Benedict"})})]},"calcType")}),n(y,{form:i,layout:"vertical",onFinish:o,children:[e(A,{gutter:16,children:e(I,{md:12,sm:24,children:e(y.Item,{label:d({id:"window.date"}),name:"timestamp",rules:[{required:!0}],children:e(j,{style:{width:"100%"},format:$,showTime:{defaultValue:f("00:00","HH:mm")},placeholder:d({id:"window.date"}),onChange:l=>p(l)})})})}),n(A,{gutter:16,children:[e(I,{md:12,sm:24,children:e(y.Item,{label:d({id:"Users.Age"}),name:"age",rules:[{required:!0}],children:e(x,{style:{width:"100%"},min:0,placeholder:d({id:"Users.Age"}),onChange:l=>g(l,"age")})})}),e(I,{md:12,sm:24,children:e(y.Item,{name:"sex",label:d({id:"Users.Gender"}),rules:[{required:!0,message:d({id:"Users.Please choose gender"})}],children:n(q,{placeholder:d({id:"Users.Gender"}),value:t.sex,onChange:l=>g(l,"sex"),children:[e(he,{value:"Male",children:d({id:"Users.Male"})},"Male"),e(he,{value:"Female",children:d({id:"Users.Female"})},"Female")]})})})]}),n(A,{gutter:16,children:[e(I,{md:12,sm:24,children:e(y.Item,{label:d({id:"Users.Weight"}),name:"weight",rules:[{required:!0,type:"number"}],children:e(x,{style:{width:"100%"},min:0,placeholder:d({id:"Users.Weight"}),onChange:l=>g(l,"weight")})})}),e(I,{md:12,sm:24,children:e(y.Item,{label:d({id:"Users.Height"}),name:"height",rules:[{required:!0,type:"number"}],children:e(x,{style:{width:"100%"},min:0,placeholder:d({id:"Users.Height"}),onChange:l=>g(l,"height")})})})]}),n(A,{gutter:16,children:[e(I,{md:12,sm:24,children:e(y.Item,{label:d({id:"Users.BMR"}),required:!0,children:e(x,{style:{width:"100%"},value:t.BMR,min:0,placeholder:d({id:"Users.BMR"}),onChange:l=>g(l,"BMR")})})}),e(I,{md:12,sm:24,children:e(y.Item,{label:d({id:"Users.PBF"}),name:"PBF",rules:[{type:"number"}],children:e(x,{style:{width:"100%"},min:0,placeholder:d({id:"Users.PBF"}),onChange:l=>g(l,"PBF")})})})]}),n(A,{gutter:16,children:[e(I,{md:12,sm:24,children:e(y.Item,{label:d({id:"Users.VFA"}),name:"VFA",rules:[{type:"number"}],children:e(x,{style:{width:"100%"},min:0,placeholder:d({id:"Users.VFA"}),onChange:l=>g(l,"VFA")})})}),e(I,{md:12,sm:24,children:e(y.Item,{label:d({id:"Users.Muscle"}),name:"muscle",rules:[{type:"number"}],children:e(x,{style:{width:"100%"},min:0,placeholder:d({id:"Users.muscle"}),onChange:l=>g(l,"muscle")})})})]}),n(A,{gutter:16,children:[e(I,{md:12,sm:24,children:e(y.Item,{label:d({id:"Users.BMI"}),name:"BMI",rules:[{type:"number"}],children:e(x,{style:{width:"100%"},min:0,placeholder:d({id:"Users.BMI"}),onChange:l=>g(l,"BMI")})})}),e(I,{md:12,sm:24,children:e(y.Item,{label:d({id:"Users.TBW"}),name:"TBW",rules:[{type:"number"}],children:e(x,{style:{width:"100%"},min:0,placeholder:d({id:"Users.TBW"}),onChange:l=>g(l,"TBW")})})})]}),e("div",{className:"form-actions",children:n(y.Item,{children:[e(b,{style:{width:150},type:"primary",htmlType:"submit",className:"mr-3",children:d({id:"window.create"})}),e(b,{style:{width:150,marginBottom:"10px"},type:"primary",onClick:()=>a(l=>({...l,BMR:ps(t)})),className:"mr-3",children:d({id:"Users.Calculate"})}),e(b,{onClick:S,children:d({id:"window.cancel"})})]})})]})]})},gs=["10","20","50","100","200"],we=({userId:s,branchId:m})=>{const[h,r]=w.useState(!1),{formatMessage:u}=B(),i=P(L(we,"orders"),async()=>(await Oe({userId:s,branchId:m})).json(),{retry:!1,cacheTime:0,onError:t=>v.error({message:`Failed to obtain orders list: ${t.message}`})}),d=[{title:u({id:"Users.Created date"}),dataIndex:"id",key:"createdDate",render:t=>e("span",{children:`${f.unix(parseInt(t.substring(0,8),16)).format($)}`}),sorter:(t,a)=>parseInt(t.id.substring(0,8),16)-parseInt(a.id.substring(0,8),16)},{title:u({id:"Users.Start"}),dataIndex:"timestamp",key:"startDate",render:t=>e("span",{children:f.unix(t).format(R)}),sorter:(t,a)=>t.timestamp-a.timestamp},{title:u({id:"Users.Diet"}),dataIndex:"diet",key:"diet",render:t=>e("span",{children:t}),sorter:(t,a)=>t.diet.length-a.diet.length},{title:u({id:"Users.Meals"}),dataIndex:"mealsPerDay",key:"mealsPerDay",render:t=>e("span",{children:t}),sorter:(t,a)=>t.mealsPerDay-a.mealsPerDay},{title:u({id:"Users.Price"}),dataIndex:"price",key:"price",render:t=>e("span",{children:t}),sorter:(t,a)=>t.price-a.price},{title:u({id:"Users.Status"}),dataIndex:"status",key:"status",render:t=>e("span",{className:t==="accepted"?"font-size-12 badge badge-success":t==="rejected"?"font-size-12 badge badge-danger":"font-size-12 badge badge-primary",children:t==="Active"?e("a",{className:"text-white",href:`/#/orders/${t.id}`,children:t.status}):t})},{title:u({id:"Users.Action"}),dataIndex:"id",key:"action",render:t=>e("span",{children:e(b,{children:e(F,{to:`/orders/${t}`,children:u({id:"Users.View"})})})})}];return w.useEffect(()=>{r(!0),i.refetch().finally(()=>r(!1))},[s]),!i.isFetched||!i.data?e("center",{children:e(W,{spinning:!0})}):e("div",{children:e(K,{className:"utils__scrollTable",tableLayout:"auto",scroll:{x:"100%"},columns:d,dataSource:i.data,pagination:{position:"bottom",total:i.data.length,showTotal:(t,a)=>`${a[0]}-${a[1]} of ${t} items`,showSizeChanger:!0,pageSizeOptions:gs,hideOnSinglePage:i.data.length<10},loading:h,rowKey:()=>Math.random().toString()})})},bs=({creditBalanceHistory:s})=>{const[m,h]=w.useState([]),{formatMessage:r}=B();w.useEffect(()=>{h(s.history)},[s]);const u=[{title:r({id:"Users.Action"}),dataIndex:"action",render:i=>e("span",{children:i})},{title:r({id:"window.date"}),dataIndex:"date",render:i=>e("span",{children:f.utc(i).format("L")})},{title:r({id:"Users.Amount"}),dataIndex:"amount",render:i=>n("span",{style:{color:i>0?"green":"red"},children:[i," Kč"]})},{title:r({id:"Users.Initial balance"}),dataIndex:"initial_balance",render:i=>n("span",{children:[i," Kč"]})},{title:r({id:"Users.Final balance"}),dataIndex:"final_balance",render:i=>n("span",{children:[i," Kč"]})}];return e("div",{children:e(K,{className:"utils__scrollTable",tableLayout:"auto",scroll:{x:"100%"},columns:u,dataSource:m,pagination:{position:"bottom",total:m&&m.length,showTotal:(i,d)=>`${d[0]}-${d[1]} of ${i} items`,showSizeChanger:!0,pageSizeOptions:["10","20","50","100","200"],hideOnSinglePage:m&&s.length<10},rowKey:()=>Math.random().toString()})})},ws="_header_pcyb5_1",fs="_socialInfo_pcyb5_6",Us="_socialCounts_pcyb5_13",Is="_actions_pcyb5_20",Ns="_contentWrapper_pcyb5_38",Cs="_card_pcyb5_42",vs="_wallItem_pcyb5_55",xs="_wallAvatar_pcyb5_62",ks="_wallContent_pcyb5_66",_s="_wallInnerContent_pcyb5_70",Ds="_wallComments_pcyb5_74",Bs="_messageImg_pcyb5_78",E={header:ws,socialInfo:fs,socialCounts:Us,actions:Is,contentWrapper:Ns,card:Cs,wallItem:vs,wallAvatar:xs,wallContent:ks,wallInnerContent:_s,wallComments:Ds,messageImg:Bs},Ss="resources/images/food-bg-desktop.png",Ms=s=>[["Users.Gender",s.sex],["Users.Age",s.age],["Users.Height",s.height],["Users.Weight",s.weight],["Users.BMR",s.BMR],["Users.PBF",s.PBF],["Users.BMI",s.BMI],["Users.VFA",s.VFA],["Users.TBW",s.TBW],["Users.Muscle",s.muscle]],As=s=>[["Users.Name:",s.name],["Users.InBodyId:",s.inBodyId],["Users.Address: ",s.address],["Users.E-Mail:",s.email],["Users.Phone: ",s.phone],["Users.Tag:",s.tag]],pe=()=>{var G,Y,Z,Q;const{formatMessage:s}=B(),[m,h]=w.useState(!1),[r,u]=w.useState(!1),{id:i}=Se(),{currentBranch:d}=Me(c=>c.settings),[t]=y.useForm(),a=P(L(pe,"user"),async()=>(await es(i)).json(),{retry:!1,cacheTime:0,onError:c=>v.error({message:`Failed to obtain user data: ${c.message}`})}),g=P(L(pe,"creditHistory"),async()=>(await ss(i)).json(),{retry:!1,cacheTime:0,onError:c=>v.error({message:`Failed to obtain user credit history data: ${c.message}`})}),p=()=>{a.refetch(),g.refetch()};if(w.useEffect(()=>{p()},[i]),a.isError||g.isError)return e(ee,{status:"500",title:"500",subTitle:s({id:"Users.Sorry, the server is wrong."}),extra:e(F,{to:"/users",children:e(b,{type:"primary",children:s({id:"Users.Back Users"})})})});if(a.isLoading||a.isFetching)return e("div",{className:"d-flex justify-content-center align-items-center",children:e(W,{spinning:!0})});if(!a.isFetched||!g.isFetched)return e(ee,{status:"500",title:"500",subTitle:s({id:"Users.Sorry, the server is wrong."}),extra:e(F,{to:"/users",children:e(b,{type:"primary",children:s({id:"Users.Back Users"})})})});const _=async c=>{const U=await oe(a.data.id,{newPassword:c.password});C(U,{successHttpStatus:205,successDescriptionMessageId:"Users.Password successfully changed!",callback:()=>u(!1)})},S=async c=>{const U=await Ve(a.data.id,c);C(U,{successHttpStatus:205,successDescriptionMessageId:"Users.Data successfully changed!"})},o=async c=>{const U=await oe(a.data.id,{newPassword:c.password});C(U,{successHttpStatus:205,successDescriptionMessageId:"Users.Password successfully changed!",callback:()=>u(!1)})},k=async()=>{const c=await ze(a.data.id,a.data.tag===V?"":V);C(c,{successHttpStatus:200,successDescriptionMessageId:"Users.Tag successfully changed!"})},l=async()=>{const c=await We(a.data.id,a.data.language===ce?de:ce);C(c,{successHttpStatus:200,successDescriptionMessageId:"Users.Language successfully changed!"})},N=async()=>{const c=await Ke(a.data.id,!a.data.isIgnoreInRating);C(c,{successHttpStatus:200,successDescriptionMessageId:"Users.Tag successfully changed!"})},M=async()=>{const c=await je(a.data.id);C(c,{successHttpStatus:200,successDescriptionMessageId:"Users.Successfully changed!"})},fe=async c=>{if(!c.startDate){v.error({message:s({id:"Users.Date is empty"}),description:s({id:"Users.Select date"})});return}const U=await Ge({userId:a.data.id,currentKitchenId:a.data.kitchenHistory[a.data.kitchenHistory.length-1].id,start:c.startDate,kitchenId:c.kitchenId});C(U,{successHttpStatus:200,successDescriptionMessageId:"Users.Kitchen successfully changed!"})},Ue=async()=>{const c=await Ye(a.data.id);C(c,{successHttpStatus:204,successDescriptionMessageId:"Users.Last record successfully changed!"})},Ie=async()=>{const c=await Ze(a.data.id);C(c,{successHttpStatus:200,successDescriptionMessageId:"Users.Request successfully send!"})},Ne=async()=>{const c=await Qe(a.data.id);C(c,{successHttpStatus:204,successDescriptionMessageId:"Users.User successfully deleted!"})},Ce=async()=>{const c=await Xe(a.data.id);C(c,{successHttpStatus:200,successDescriptionMessageId:"Users.User successfully restored!"})},C=(c,U)=>{const T={...{successMessageId:"window.success",successDescriptionMessageId:"",successHttpStatus:200,failureMessageId:"window.error",callback:null},...U};c.status===T.successHttpStatus?(p(),v.success({message:s({id:T.successMessageId}),description:s({id:T.successDescriptionMessageId})}),T.callback&&T.callback()):v.error({message:s({id:T.failureMessageId}),description:c.statusText})},ve=async()=>{const c=await Je(a.data.id);c.status===200?(p(),v.success({message:s({id:"window.success"}),description:s({id:"Users.Request successfully send!"})})):v.error({message:s({id:"window.error"}),description:c.statusText})};return n("div",{children:[e(ms,{form:t,visible:r,onCreate:_,onCancel:()=>u(!1)}),e(Ae,{title:`${s({id:"Users.Profile"})} ${a.data.name}`}),e("div",{children:n("div",{className:"row",children:[n("div",{className:"col-xl-4",children:[e("div",{className:`card ${E.header}`,style:{backgroundImage:`url(${Ss})`},children:e("div",{children:n("div",{className:"card-body text-center",children:[n("p",{className:"mt-2",style:{fontSize:"28px"},children:[s({id:"Users.Sales manager: "}),a.data.sales||"-"]}),a.data.creditBalance!==0&&e(Te,{children:n("p",{className:"mt-2",style:{fontSize:"20px"},children:[s({id:"Users.Available credit balance: "}),n("b",{children:[a.data.creditBalance," Kč"]})]})}),e("p",{className:"mt-2",children:`Customer created: ${f.unix(parseInt(a.data.id.substring(0,8),16)).format($)}`}),n("p",{className:"mt-2",children:[a.data.status===ae&&e(z,{type:"success",name:ae}),a.data.status===te&&e(z,{type:"danger",name:te})]})]})})}),e(J,{roles:[H,re,Le,ie,ne,$e],children:e("div",{className:"card",children:n("div",{className:"card-body",children:[e("h5",{className:"mb-3 text-black",children:e("strong",{children:s({id:"Users.Actions"})})}),n("div",{className:E.actions,children:[e(F,{to:`/orders/create/${a.data.id}`,style:{display:"block",width:"100%"},children:e(b,{style:{display:"block",width:"100%"},children:s({id:"Users.Create order"})})}),a.data.paymentData.isCompany&&e(F,{to:`/b2b-order/${a.data.id}`,style:{display:"block",width:"100%"},children:e(b,{style:{display:"block",width:"100%"},children:s({id:"Users.Create B2B order"})})}),e(b,{style:{display:"block",width:"100%"},onClick:()=>h(!0),children:s({id:"Users.Add dataset"})}),e(b,{style:{display:"block",width:"100%"},onClick:k,children:a.data.tag===V?s({id:"Users.Unmark as VIP"}):s({id:"Users.Mark as VIP"})}),e(b,{style:{display:"block",width:"100%"},onClick:l,children:a.data.language===de?s({id:"Users.Unmark as English"}):s({id:"Users.Mark as English"})}),a.data.role===H&&e(b,{style:{display:"block",width:"100%"},onClick:N,children:a.data.isIgnoreInRating?s({id:"Users.Unmark as Ignored"}):s({id:"Users.Mark as Ignored"})}),e(b,{style:{display:"block",width:"100%"},onClick:M,children:a.data.isNotCzech?s({id:"Users.not Czech (Click set Czech)"}):s({id:"Users.Czech (Click set not Czech)"})}),Boolean(a.data.bitrixId)&&e(b,{style:{display:"block",width:"100%"},onClick:Ie,children:s({id:"Users.Sync Bitrix"})}),Boolean(a.data.bitrixId)&&e(b,{style:{display:"block",width:"100%"},onClick:ve,children:"(NEW) Sync with Bitrix"}),e(b,{style:{display:"block",width:"100%"},onClick:()=>u(!0),children:s({id:"Users.Change password"})}),e(F,{to:`/menu/${a.data.id}`,children:e(b,{style:{display:"block",width:"100%",borderRadius:"0px"},children:s({id:"Users.View menu"})})}),e(J,{roles:[H,re,ie,ne],children:e(Re,{title:`Are you sure to ${a.data.deleted?"restore":"delete"} this user?`,onConfirm:a.data.deleted?Ce:Ne,okText:"Yes",cancelText:"No",children:e(b,{type:"danger",style:{display:"block",width:"100%",borderRadius:"0px 0px 5px 5px"},children:a.data.deleted?s({id:"Users.Restore"}):s({id:"Users.Delete"})})})})]})]})})}),e("div",{className:"card",children:n("div",{className:"card-body",children:[e("h5",{className:"mb-3 text-black",children:e("strong",{children:s({id:"Users.Last dataset"})})}),((G=a.data.lastDataSet)==null?void 0:G.status)===le&&n("div",{children:[e("dl",{className:"row",children:Ms(a.data.lastDataSet.data).map(([c,U])=>n(w.Fragment,{children:[e("dt",{className:"col-xl-3",children:s({id:c})},`${c}-dt`),e("dd",{className:"col-xl-9",children:U||"-"},`${c}-dd`)]},c))}),e("small",{className:"text-muted",children:f.unix(a.data.lastDataSet.timestamp).format($)})]}),((Y=a.data.lastDataSet)==null?void 0:Y.status)!==le&&e("p",{children:s({id:"Users.Empty"})})]})}),e("div",{className:"card",children:n("div",{className:"card-body",children:[e("h5",{className:"mb-3 text-black",children:e("strong",{children:s({id:"Users.Information"})})}),e("div",{children:As(a.data).map(([c,U])=>n("div",{children:[e("b",{children:s({id:c})}),` ${U||"-"}`]},c))},1)]})}),e("div",{className:"card",children:n("div",{className:"card-body",children:[e("h5",{className:"mb-3 text-black",children:e("strong",{children:s({id:"Users.Calendar"})})}),e(Fe,{fullscreen:!1})]})})]}),n("div",{className:"col-xl-8",children:[n("div",{className:`card card-body mb-4 ${E.socialInfo}`,children:[n("div",{children:[n("h2",{children:[e("span",{className:"text-black mr-2",children:e("strong",{children:a.data.name})}),e("small",{className:"text-muted",children:a.data.inBodyId})]}),n("p",{className:"mb-1",children:[e("b",{children:"#"}),a.data.id]}),n("p",{className:"mb-1",children:[s({id:"Users.Address: "}),a.data.address]}),n("p",{className:"mb-1",children:[s({id:"Users.Phone: "}),a.data.phone]})]}),n("div",{className:E.socialCounts,children:[n("div",{className:"text-center mr-3",children:[e("h2",{children:Math.abs(f(a.data.birthday).diff(f(),"years"))||"-"}),e("p",{className:"mb-0",children:s({id:"Users.Age"})})]}),n("div",{className:"text-center",children:[e("h2",{children:(Z=a.data.lastDataSet)!=null&&Z.data?(Q=a.data.lastDataSet)==null?void 0:Q.data.weight:"-"}),e("p",{className:"mb-0",children:s({id:"Users.Weight"})})]})]})]}),e("div",{className:"card",children:e("div",{className:"card-body",children:e(Ee,{defaultActiveKey:"1",items:[{label:n("span",{children:[e("i",{className:"icmn-history"})," ",s({id:"Users.Orders history"})]}),key:"1",children:e(we,{userId:a.data.id,branchId:d})},{label:n("span",{children:[e("i",{className:"icmn-history"})," ",s({id:"Users.Datasets history"})]}),key:"2",children:e(cs,{data:a.data.dataSets})},{label:n("span",{children:[e("i",{className:"icmn-history"})," ",s({id:"Users.Kitchen history"})]}),key:"3",children:e(be,{onCreate:o,current:a.data.currentKitchen,kitchenHistory:a.data.kitchenHistory,push:fe,onDeleteLast:Ue})},{label:n("span",{children:[e("i",{className:"icmn-history"})," ",s({id:"Users.Credit balance history"})]}),key:"4",children:e(bs,{creditBalanceHistory:g.data})},{label:n("span",{children:[e("i",{className:"icmn-cog"})," ",s({id:"window.edit"})]}),key:"5",children:e(os,{data:a.data,onSend:S})}]})})})]})]})}),e(ys,{visible:m,userId:a.data.id,onClose:()=>h(!1),onCreate:He,update:p})]})};export{pe as default};
