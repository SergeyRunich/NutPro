import{j as e,aa as t,B as h,bF as B,r,c as i,a8 as G,bg as F,b0 as d,b4 as K,a4 as Q,bo as U,a3 as M}from"./index-c20b5e8e.js";import"./PickerPanel-72c5d64a.js";/* empty css              */import{S as f}from"./index-297358d3.js";import{D as J}from"./index-2f7554ca.js";import{T as W}from"./Table-fe15f1b3.js";import"./Pagination-e2a53e90.js";import{T as x}from"./index-8e340a60.js";import{Q as X,R as Z}from"./order-d29e3517.js";import"./padStart-17be0050.js";import"./styleChecker-a7b568e2.js";function q(l){return e(W,{className:"utils__scrollTable",tableLayout:"auto",scroll:{x:"100%"},columns:[{title:"Name",dataIndex:"user",key:"name",render:a=>e("span",{children:`${a.name}`})},{title:"Start date",dataIndex:"timestamp",key:"startDate",render:a=>e("span",{children:t.unix(a).format("DD.MM.YYYY")})},{title:"Length",dataIndex:"length",key:"length",render:a=>e("span",{children:`${a}`})},{title:"Status",dataIndex:"status",key:"status",render:a=>e("span",{children:`${a}`})},{title:"Number of pauses",dataIndex:"numberPauses",key:"numberPauses",render:a=>e("span",{children:a})},{title:"Sales",dataIndex:"sales",key:"sales",render:a=>e("span",{children:`${a}`})},{title:"Automatic pause",dataIndex:"hasPause",key:"hasPause",render:(a,c)=>c.verified?e("span",{children:e(x,{color:"green",children:"Verified"})}):e("span",{children:e(x,{color:a?"red":"green",children:a?"No":"Yes"})})},{title:"Verified",dataIndex:"verified",key:"verified",render:a=>e("span",{children:e(x,{color:a?"green":"red",children:a?"Verified":"No"})})},{title:"Action",dataIndex:"id",key:"action",render:a=>e("span",{children:e("span",{children:e(h,{children:e(B,{target:"_blank",to:`/orders/${a}`,children:"View Order"})})})})}],dataSource:l.data,pagination:{position:"bottom",total:l.data&&l.data.length,showTotal:(a,c)=>`${c[0]}-${c[1]} of ${a} items`,showSizeChanger:!0,pageSizeOptions:["10","20","50","100","200"],hideOnSinglePage:l.data&&l.data.length<10},rowKey:()=>Math.random()})}const{RangePicker:ee}=J;t.updateLocale("en",{week:{dow:1}});function he(){const[l,v]=r.useState(t("22-12-2021","DD-MM-YYYY").unix()),[a,c]=r.useState(t("03-01-2022","DD-MM-YYYY").unix()),[k,w]=r.useState([]),[o,C]=r.useState({}),[Y,m]=r.useState(!1),[p,N]=r.useState("no"),[g,T]=r.useState("all"),[I,D]=r.useState(!1),[A,y]=r.useState(!1),[b,V]=r.useState(!0),[u,O]=r.useState(0),R=async s=>{N(s.target.value)},j=async s=>{T(s.target.value)},$=async s=>{v(s[0].unix()),c(s[1].unix())},H=()=>k.filter(n=>!(p==="no"&&n.verified===!0||p==="yes"&&n.verified===!1||g==="no"&&n.hasPause===!0||g==="yes"&&n.hasPause===!1)),P=()=>{D(!1),u!==0&&S()},L=()=>{V(!b)},E=()=>{const s={start:t.unix(l).format("DD-MM-YYYY"),end:t.unix(a).format("DD-MM-YYYY")};y(!0),X(s).then(async n=>{if(n.status===201){const z=await n.json();O(z.newPauses),y(!1)}else y(!1),M.error({message:"Error",description:n.statusText})})},S=()=>{m(!0),Z(t.unix(l).format("DD-MM-YYYY"),t.unix(a).format("DD-MM-YYYY")).then(async s=>{if(s.status===200){const n=await s.json();w(n.data),C(n.stats),m(!1)}else m(!1),M.error({message:"Error",description:s.statusText})})},_=H();return i(G,{roles:["root","salesDirector"],users:["David"],redirect:!0,to:"/main",children:[e(F,{title:"Checking Pauses"}),e("div",{className:"row",children:e("div",{className:"col-xl-12",children:e("div",{className:"card card--fullHeight",children:i("div",{className:"card-body",children:[e("small",{children:"Select the dates as when setting the pause"})," ",e("br",{}),e(ee,{ranges:{"Previous Month":[t().subtract(1,"month").startOf("month"),t().subtract(1,"month").endOf("month")],"This Month":[t().startOf("month"),t().endOf("month")],"Christmas holidays 2021-2022":[t("22-12-2021","DD-MM-YYYY"),t("03-01-2022","DD-MM-YYYY")]},defaultValue:[t(l*1e3),t(a*1e3)],format:"DD.MM.YYYY",onChange:$,style:{marginRight:"10px"}}),e(h,{loading:Y,type:"primary",style:{margin:"0px 10px"},onClick:S,children:"Show"}),i("div",{style:{position:"relative",display:"flex",marginTop:"15px"},children:[i("span",{style:{border:"1px solid #e4e9f0",borderRadius:"4px",padding:"5px 15px",marginRight:"10px"},children:[e("span",{style:{marginRight:"20px"},children:"Verified"}),i(d.Group,{onChange:R,value:p,children:[e(d,{value:"no",children:"No"}),e(d,{value:"yes",children:"Yes"}),e(d,{value:"all",children:"All"})]})]}),i("span",{style:{border:"1px solid #e4e9f0",borderRadius:"4px",padding:"5px 15px",marginLeft:"10px"},children:[e("span",{style:{marginRight:"20px"},children:"Possibility of automatic pause"}),i(d.Group,{onChange:j,value:g,children:[e(d,{value:"yes",children:"No"}),e(d,{value:"no",children:"Yes"}),e(d,{value:"all",children:"All"})]})]}),e(h,{disabled:!o.automaticPause||o.automaticPause===0,type:"primary",style:{margin:"0px 15px"},onClick:()=>{D(!0)},children:"Set automatic pauses"})]})]})})})}),e("div",{className:"row",children:e("div",{className:"col-lg-12",children:e("div",{className:"card card--fullHeight",children:e("div",{className:"card-body",children:i("div",{style:{width:"100%",display:"flex",justifyContent:"space-around",alignItems:"center"},children:[e("div",{children:e(f,{style:{textAlign:"center"},title:"Total",value:o.total})}),e("div",{children:e(f,{style:{textAlign:"center"},title:"Verified",value:o.verified})}),e("div",{children:e(f,{style:{textAlign:"center"},title:"Unverified",value:o.unverified})}),e("div",{children:e(f,{style:{textAlign:"center"},title:"Possibility of automatic pause",value:o.automaticPause})})]})})})})}),e("div",{className:"row",children:e("div",{className:"col-xl-12",children:e("div",{className:"card card--fullHeight",children:e("div",{className:"card-body",children:e(K,{spinning:Y,children:e(q,{data:_})})})})})}),i(Q,{title:"Set automatic pauses",open:I,onCancel:P,footer:[u===0&&e(h,{disabled:b,loading:A,type:"primary",onClick:E,children:"Pause"},"approve"),e(h,{onClick:P,children:u===0?"Cancel":"Ok"},"cancel")],children:[u===0&&i("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[i("strong",{children:["Are you sure you want set pauses automatically for ",o.automaticPause," orders?"]}),e("br",{}),e("strong",{style:{color:"red"},children:"This action is irreversible in automatic mode."}),e(U,{style:{marginTop:"15px"},onChange:L,title:"I'm sure"})]}),u!==0&&e("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:i("strong",{children:["Pause set successfully for ",u," orders"]})})]})]})}export{he as default};
